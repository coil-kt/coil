<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An image loading library for Android backed by Kotlin Coroutines"><meta name=author content="2024 Coil Contributors"><link href=https://coil-kt.github.io/coil/changelog/ rel=canonical><link href=../sample/ rel=prev><link href=../contributing/ rel=next><link rel=icon href=../images/coil_logo_black.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Change Log - Coil</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/site.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#changelog class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Coil class="md-header__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Coil </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Change Log </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=white aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=black aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Coil class="md-nav__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> Coil </label> <div class=md-nav__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../compose/ class=md-nav__link> <span class=md-ellipsis> Compose </span> </a> </li> <li class=md-nav__item> <a href=../network/ class=md-nav__link> <span class=md-ellipsis> Network Images </span> </a> </li> <li class=md-nav__item> <a href=../image_loaders/ class=md-nav__link> <span class=md-ellipsis> Image Loaders </span> </a> </li> <li class=md-nav__item> <a href=../image_requests/ class=md-nav__link> <span class=md-ellipsis> Image Requests </span> </a> </li> <li class=md-nav__item> <a href=../image_pipeline/ class=md-nav__link> <span class=md-ellipsis> Extending the Image Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../gifs/ class=md-nav__link> <span class=md-ellipsis> GIFs </span> </a> </li> <li class=md-nav__item> <a href=../svgs/ class=md-nav__link> <span class=md-ellipsis> SVGs </span> </a> </li> <li class=md-nav__item> <a href=../videos/ class=md-nav__link> <span class=md-ellipsis> Video Frames </span> </a> </li> <li class=md-nav__item> <a href=../testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../recipes/ class=md-nav__link> <span class=md-ellipsis> Recipes </span> </a> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../java_compatibility/ class=md-nav__link> <span class=md-ellipsis> Java Compatibility </span> </a> </li> <li class=md-nav__item> <a href=../migrating/ class=md-nav__link> <span class=md-ellipsis> Migrating from Glide/Picasso </span> </a> </li> <li class=md-nav__item> <a href=../upgrading_to_coil2/ class=md-nav__link> <span class=md-ellipsis> Upgrading to Coil 2.x </span> </a> </li> <li class=md-nav__item> <a href=../upgrading_to_coil3/ class=md-nav__link> <span class=md-ellipsis> Upgrading to Coil 3.x </span> </a> </li> <li class=md-nav__item> <a href=../works_with_coil/ class=md-nav__link> <span class=md-ellipsis> Works with Coil </span> </a> </li> <li class=md-nav__item> <a href=../api/ class=md-nav__link> <span class=md-ellipsis> API ⏏ </span> </a> </li> <li class=md-nav__item> <a href=../sample/ class=md-nav__link> <span class=md-ellipsis> WASM Sample ⏏ </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Change Log </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Change Log </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#330-july-22-2025 class=md-nav__link> <span class=md-ellipsis> [3.3.0] - July 22, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-may-13-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0] - May 13, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-rc02-april-26-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0-rc02] - April 26, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-rc01-april-24-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0-rc01] - April 24, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#310-february-4-2025 class=md-nav__link> <span class=md-ellipsis> [3.1.0] - February 4, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#304-november-25-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.4] - November 25, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#303-november-14-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.3] - November 14, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#302-november-9-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.2] - November 9, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#301-november-7-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.1] - November 7, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-november-4-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0] - November 4, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-rc02-october-28-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-rc02] - October 28, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-rc01-october-8-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-rc01] - October 8, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha10-august-7-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha10] - August 7, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha09-july-23-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha09] - July 23, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#270-july-17-2024 class=md-nav__link> <span class=md-ellipsis> [2.7.0] - July 17, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha08-july-8-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha08] - July 8, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha07-june-26-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha07] - June 26, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha06-february-29-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha06] - February 29, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha05-february-28-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha05] - February 28, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#260-february-23-2024 class=md-nav__link> <span class=md-ellipsis> [2.6.0] - February 23, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha04-february-1-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha04] - February 1, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha03-january-20-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha03] - January 20, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha02-january-10-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha02] - January 10, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha01-december-30-2023 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha01] - December 30, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#250-october-30-2023 class=md-nav__link> <span class=md-ellipsis> [2.5.0] - October 30, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#240-may-21-2023 class=md-nav__link> <span class=md-ellipsis> [2.4.0] - May 21, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#230-march-25-2023 class=md-nav__link> <span class=md-ellipsis> [2.3.0] - March 25, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#222-october-1-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.2] - October 1, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#221-september-8-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.1] - September 8, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#220-august-16-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.0] - August 16, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#210-may-17-2022 class=md-nav__link> <span class=md-ellipsis> [2.1.0] - May 17, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-may-10-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0] - May 10, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc03-april-11-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc03] - April 11, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc02-march-20-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc02] - March 20, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc01-march-2-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc01] - March 2, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha09-february-16-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha09] - February 16, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha08-february-7-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha08] - February 7, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha07-january-30-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha07] - January 30, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha06-december-24-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha06] - December 24, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha05-november-28-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha05] - November 28, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha04-november-22-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha04] - November 22, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha03-november-12-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha03] - November 12, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha02-october-24-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha02] - October 24, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha01-october-11-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha01] - October 11, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#140-october-6-2021 class=md-nav__link> <span class=md-ellipsis> [1.4.0] - October 6, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#132-august-4-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.2] - August 4, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#131-july-28-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.1] - July 28, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#130-july-10-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.0] - July 10, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#122-june-4-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.2] - June 4, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#121-april-27-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.1] - April 27, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#120-april-12-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.0] - April 12, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#111-january-11-2021 class=md-nav__link> <span class=md-ellipsis> [1.1.1] - January 11, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#110-november-24-2020 class=md-nav__link> <span class=md-ellipsis> [1.1.0] - November 24, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-october-22-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0] - October 22, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc3-september-21-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc3] - September 21, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc2-september-3-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc2] - September 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0130-september-3-2020 class=md-nav__link> <span class=md-ellipsis> [0.13.0] - September 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc1-august-18-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc1] - August 18, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0120-august-18-2020 class=md-nav__link> <span class=md-ellipsis> [0.12.0] - August 18, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0110-may-14-2020 class=md-nav__link> <span class=md-ellipsis> [0.11.0] - May 14, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0101-april-26-2020 class=md-nav__link> <span class=md-ellipsis> [0.10.1] - April 26, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0100-april-20-2020 class=md-nav__link> <span class=md-ellipsis> [0.10.0] - April 20, 2020 </span> </a> <nav class=md-nav aria-label="[0.10.0] - April 20, 2020"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#highlights class=md-nav__link> <span class=md-ellipsis> Highlights </span> </a> </li> <li class=md-nav__item> <a href=#full-release-notes class=md-nav__link> <span class=md-ellipsis> Full Release Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#095-february-6-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.5] - February 6, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#094-february-3-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.4] - February 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#093-february-1-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.3] - February 1, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#092-january-19-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.2] - January 19, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#091-december-30-2019 class=md-nav__link> <span class=md-ellipsis> [0.9.1] - December 30, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#090-december-30-2019 class=md-nav__link> <span class=md-ellipsis> [0.9.0] - December 30, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#080-october-22-2019 class=md-nav__link> <span class=md-ellipsis> [0.8.0] - October 22, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#070-september-8-2019 class=md-nav__link> <span class=md-ellipsis> [0.7.0] - September 8, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#061-august-16-2019 class=md-nav__link> <span class=md-ellipsis> [0.6.1] - August 16, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#060-august-12-2019 class=md-nav__link> <span class=md-ellipsis> [0.6.0] - August 12, 2019 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../code_of_conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#330-july-22-2025 class=md-nav__link> <span class=md-ellipsis> [3.3.0] - July 22, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-may-13-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0] - May 13, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-rc02-april-26-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0-rc02] - April 26, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#320-rc01-april-24-2025 class=md-nav__link> <span class=md-ellipsis> [3.2.0-rc01] - April 24, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#310-february-4-2025 class=md-nav__link> <span class=md-ellipsis> [3.1.0] - February 4, 2025 </span> </a> </li> <li class=md-nav__item> <a href=#304-november-25-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.4] - November 25, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#303-november-14-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.3] - November 14, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#302-november-9-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.2] - November 9, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#301-november-7-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.1] - November 7, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-november-4-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0] - November 4, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-rc02-october-28-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-rc02] - October 28, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-rc01-october-8-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-rc01] - October 8, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha10-august-7-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha10] - August 7, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha09-july-23-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha09] - July 23, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#270-july-17-2024 class=md-nav__link> <span class=md-ellipsis> [2.7.0] - July 17, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha08-july-8-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha08] - July 8, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha07-june-26-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha07] - June 26, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha06-february-29-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha06] - February 29, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha05-february-28-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha05] - February 28, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#260-february-23-2024 class=md-nav__link> <span class=md-ellipsis> [2.6.0] - February 23, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha04-february-1-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha04] - February 1, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha03-january-20-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha03] - January 20, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha02-january-10-2024 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha02] - January 10, 2024 </span> </a> </li> <li class=md-nav__item> <a href=#300-alpha01-december-30-2023 class=md-nav__link> <span class=md-ellipsis> [3.0.0-alpha01] - December 30, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#250-october-30-2023 class=md-nav__link> <span class=md-ellipsis> [2.5.0] - October 30, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#240-may-21-2023 class=md-nav__link> <span class=md-ellipsis> [2.4.0] - May 21, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#230-march-25-2023 class=md-nav__link> <span class=md-ellipsis> [2.3.0] - March 25, 2023 </span> </a> </li> <li class=md-nav__item> <a href=#222-october-1-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.2] - October 1, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#221-september-8-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.1] - September 8, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#220-august-16-2022 class=md-nav__link> <span class=md-ellipsis> [2.2.0] - August 16, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#210-may-17-2022 class=md-nav__link> <span class=md-ellipsis> [2.1.0] - May 17, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-may-10-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0] - May 10, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc03-april-11-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc03] - April 11, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc02-march-20-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc02] - March 20, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-rc01-march-2-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-rc01] - March 2, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha09-february-16-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha09] - February 16, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha08-february-7-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha08] - February 7, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha07-january-30-2022 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha07] - January 30, 2022 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha06-december-24-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha06] - December 24, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha05-november-28-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha05] - November 28, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha04-november-22-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha04] - November 22, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha03-november-12-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha03] - November 12, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha02-october-24-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha02] - October 24, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#200-alpha01-october-11-2021 class=md-nav__link> <span class=md-ellipsis> [2.0.0-alpha01] - October 11, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#140-october-6-2021 class=md-nav__link> <span class=md-ellipsis> [1.4.0] - October 6, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#132-august-4-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.2] - August 4, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#131-july-28-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.1] - July 28, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#130-july-10-2021 class=md-nav__link> <span class=md-ellipsis> [1.3.0] - July 10, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#122-june-4-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.2] - June 4, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#121-april-27-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.1] - April 27, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#120-april-12-2021 class=md-nav__link> <span class=md-ellipsis> [1.2.0] - April 12, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#111-january-11-2021 class=md-nav__link> <span class=md-ellipsis> [1.1.1] - January 11, 2021 </span> </a> </li> <li class=md-nav__item> <a href=#110-november-24-2020 class=md-nav__link> <span class=md-ellipsis> [1.1.0] - November 24, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-october-22-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0] - October 22, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc3-september-21-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc3] - September 21, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc2-september-3-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc2] - September 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0130-september-3-2020 class=md-nav__link> <span class=md-ellipsis> [0.13.0] - September 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#100-rc1-august-18-2020 class=md-nav__link> <span class=md-ellipsis> [1.0.0-rc1] - August 18, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0120-august-18-2020 class=md-nav__link> <span class=md-ellipsis> [0.12.0] - August 18, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0110-may-14-2020 class=md-nav__link> <span class=md-ellipsis> [0.11.0] - May 14, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0101-april-26-2020 class=md-nav__link> <span class=md-ellipsis> [0.10.1] - April 26, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#0100-april-20-2020 class=md-nav__link> <span class=md-ellipsis> [0.10.0] - April 20, 2020 </span> </a> <nav class=md-nav aria-label="[0.10.0] - April 20, 2020"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#highlights class=md-nav__link> <span class=md-ellipsis> Highlights </span> </a> </li> <li class=md-nav__item> <a href=#full-release-notes class=md-nav__link> <span class=md-ellipsis> Full Release Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#095-february-6-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.5] - February 6, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#094-february-3-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.4] - February 3, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#093-february-1-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.3] - February 1, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#092-january-19-2020 class=md-nav__link> <span class=md-ellipsis> [0.9.2] - January 19, 2020 </span> </a> </li> <li class=md-nav__item> <a href=#091-december-30-2019 class=md-nav__link> <span class=md-ellipsis> [0.9.1] - December 30, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#090-december-30-2019 class=md-nav__link> <span class=md-ellipsis> [0.9.0] - December 30, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#080-october-22-2019 class=md-nav__link> <span class=md-ellipsis> [0.8.0] - October 22, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#070-september-8-2019 class=md-nav__link> <span class=md-ellipsis> [0.7.0] - September 8, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#061-august-16-2019 class=md-nav__link> <span class=md-ellipsis> [0.6.1] - August 16, 2019 </span> </a> </li> <li class=md-nav__item> <a href=#060-august-12-2019 class=md-nav__link> <span class=md-ellipsis> [0.6.0] - August 12, 2019 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=changelog>Changelog<a class=headerlink href=#changelog title="Permanent link">&para;</a></h1> <h2 id=330-july-22-2025>[3.3.0] - July 22, 2025<a class=headerlink href=#330-july-22-2025 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Introduce a new API to limit <code>MemoryCache.maxSize</code> on Android while the app is backgrounded.<ul> <li>If <code>ImageLoader.Builder.memoryCacheMaxSizePercentWhileInBackground</code> is set, the <code>ImageLoader</code>'s memory cache will be limited to a percent of its max size while the app is backgrounded. This setting is currently disabled by default.</li> <li>Images will be trimmed from the memory cache to reach the limited max size when the app is backgrounded, however the memory cache's weak references to recently trimmed images are unaffected. This means if an image is currently referenced elsewhere (e.g. <code>AsyncImage</code>, <code>ImageView</code>, etc.) it will still be present in the memory cache.</li> <li>This API is useful to reduce background memory usage, keep your app from being killed earlier, and help reduce memory pressure on your users' devices.</li> </ul> </li> <li><strong>New</strong>: Add an <code>Svg.Parser</code> argument to <code>SvgDecoder</code>.<ul> <li>This enables using custom SVG parsers if the default SVG parser doesn't meet your needs.</li> </ul> </li> <li>Add a <code>density</code> argument to <code>SvgDecoder</code> to support providing a custom density multiplier.</li> <li>Add <code>Uri.Builder</code> to support copying and modifying <code>Uri</code>s.</li> <li>Add <code>ImageLoader.Builder.mainCoroutineContext</code> to support overriding Coil's <code>Dispatchers.main.immediate</code> usage in tests.</li> <li>Fix <code>CrossfadePainter.intrinsicSize</code> changing when the <code>start</code> image is dereferenced at the end of the animation. This aligns with the behaviour of <code>CrossfadeDrawable</code>.</li> <li>Fix <code>ImageLoaders.executeBlocking</code> being inaccessible from Java.</li> <li>Use <code>kotlinx.io</code>'s Okio interop module in <code>coil-network-ktor3</code>.</li> <li>Update <code>kotlinx-datetime</code> to <code>0.7.1</code>.<ul> <li>This release includes binary incompatible changes that only affect the <code>coil-network-cache-control</code> module. See <a href="https://github.com/Kotlin/kotlinx-datetime?tab=readme-ov-file#deprecation-of-instant">here</a> for more info.</li> </ul> </li> <li>Update Kotlin to 2.2.0.</li> <li>Update Compose to 1.8.2.</li> <li>Update Okio to 3.15.0.</li> <li>Update Skiko to 0.9.4.2.</li> </ul> <h2 id=320-may-13-2025>[3.2.0] - May 13, 2025<a class=headerlink href=#320-may-13-2025 title="Permanent link">&para;</a></h2> <p>Changes since <code>3.1.0</code>:</p> <ul> <li><strong>Important</strong>: <code>coil-compose</code> and <code>coil-compose-core</code> now require Java 11 bytecode due to Compose <code>1.8.0</code> requiring it. See <a href=https://coil-kt.github.io/coil/faq/#how-do-i-target-java-8-or-java-11>here</a> for how to enable it.</li> <li>Change <code>AsyncImagePreviewHandler</code>'s functional constructor to return <code>AsyncImagePainter.State.Success</code> instead of <code>AsyncImagePainter.State.Loading</code>.</li> <li>Fix cancellation in <code>ConstraintsSizeResolver#size()</code>.</li> <li>Fix warning for missing <code>PlatformContext</code> when building with R8.</li> <li>Fix <code>FakeImageLoaderEngine</code> not setting <code>Transition.Factory.NONE</code> when the default <code>FakeImageLoaderEngine</code> response is returned.</li> <li>Remove experimental annotation from <code>ColorImage</code>.</li> <li>Parse network headers lazily in <code>CacheControlCacheStrategy</code>.</li> <li>Refactor <code>CircleCropTransformation</code> and <code>RoundedCornersTransformation</code> to share common code.</li> <li>Fall back to using <code>BitmapFactory</code> internally if <code>ExifOrientationStrategy</code> is not <code>RESPECT_PERFORMANCE</code>.</li> <li>Update Kotlin to 2.1.20.</li> <li>Update Compose to 1.8.0.</li> <li>Update Okio to 3.11.0.</li> <li>Update Skiko to 0.9.4.</li> <li>Update Coroutines to 1.10.2.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.37.3.</li> </ul> <p>Changes since <code>3.2.0-rc02</code>:</p> <ul> <li>Fall back to using <code>BitmapFactory</code> internally if <code>ExifOrientationStrategy</code> is not <code>RESPECT_PERFORMANCE</code>.</li> <li>Update Compose to 1.8.0.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.37.3.</li> </ul> <h2 id=320-rc02-april-26-2025>[3.2.0-rc02] - April 26, 2025<a class=headerlink href=#320-rc02-april-26-2025 title="Permanent link">&para;</a></h2> <ul> <li>Fix image requests failing with <code>ClosedByteChannelException</code> when loading an image with <code>KtorNetworkFetcherFactory</code> (Ktor 3) on non-JVM targets.</li> </ul> <h2 id=320-rc01-april-24-2025>[3.2.0-rc01] - April 24, 2025<a class=headerlink href=#320-rc01-april-24-2025 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: <code>coil-compose</code> and <code>coil-compose-core</code> now require Java 11 bytecode due to Compose <code>1.8.0</code> requiring it. See <a href=https://coil-kt.github.io/coil/faq/#how-do-i-target-java-8-or-java-11>here</a> for how to enable it.</li> <li>Change <code>AsyncImagePreviewHandler</code>'s functional constructor to return <code>AsyncImagePainter.State.Success</code> instead of <code>AsyncImagePainter.State.Loading</code>.</li> <li>Fix cancellation in <code>ConstraintsSizeResolver#size()</code>.</li> <li>Fix warning for missing <code>PlatformContext</code> when building with R8.</li> <li>Fix <code>FakeImageLoaderEngine</code> not setting <code>Transition.Factory.NONE</code> when the default <code>FakeImageLoaderEngine</code> response is returned.</li> <li>Remove experimental annotation from <code>ColorImage</code>.</li> <li>Parse network headers lazily in <code>CacheControlCacheStrategy</code>.</li> <li>Refactor <code>CircleCropTransformation</code> and <code>RoundedCornersTransformation</code> to share common code.</li> <li>Use <code>kotlinx.io</code>'s Okio interop module in <code>coil-network-ktor2</code> and <code>coil-network-ktor3</code>.</li> <li>Update Kotlin to 2.1.20.</li> <li>Update Compose to 1.8.0-rc01.</li> <li>Update Okio to 3.11.0.</li> <li>Update Skiko to 0.9.4.</li> <li>Update Coroutines to 1.10.2.</li> </ul> <h2 id=310-february-4-2025>[3.1.0] - February 4, 2025<a class=headerlink href=#310-february-4-2025 title="Permanent link">&para;</a></h2> <ul> <li>Improve <code>AsyncImage</code> performance.<ul> <li>Runtime performance is improved by 25% to 40% depending on if the composable is being instantiated or reused. Allocations are also reduced by 35% to 48%. More info <a href=https://github.com/coil-kt/coil/pull/2795>here</a>.</li> </ul> </li> <li>Add <code>ColorImage</code> and deprecate <code>FakeImage</code>.<ul> <li><code>ColorImage</code> is useful for returning a fake value in tests and previews. It solves the same use case as <code>FakeImage</code>, but is more easily accessible in <code>coil-core</code> instead of <code>coil-test</code>.</li> </ul> </li> <li>Remove <code>coil-compose-core</code>'s dependency on <code>Dispatchers.Main.immedate</code>.<ul> <li>This also fixes a case where <code>AsyncImagePainter</code> would not execute <code>ImageRequest</code>s synchronously in Paparazzi and Roborazzi screenshot tests.</li> </ul> </li> <li>Add support for <a href=https://www.ietf.org/rfc/rfc2397.txt>data URIs</a> with the format: <code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code></li> <li>Add <code>AnimatedImageDecoder.ENCODED_LOOP_COUNT</code> to support using the encoded repeat count in a GIF's metadata.</li> <li>Add <code>Extras</code> to <code>NetworkRequest</code> to support custom extensions.</li> <li>Add <code>DiskCache.Builder.cleanupCoroutineContext</code> and deprecate <code>DiskCache.Builder.cleanupDispatcher</code>.</li> <li>Add <code>ImageLoader.Builder.imageDecoderEnabled</code> to optionally disable using <code>android.graphics.ImageDecoder</code> on API 29 and above.</li> <li>Log a warning if there is no registered <code>Keyer</code> for an <code>ImageRequest</code>'s data type.</li> <li>Make <code>CrossfadePainter</code> public.</li> <li>Support <code>Transformation</code>s on all multiplatform targets.</li> <li>Support 0 as <code>Expires</code> header value in <code>CacheControlCacheStrategy</code>.</li> <li>Fix <code>AsyncImage</code>/<code>SubcomposeAsyncImage</code>/<code>rememberAsyncImage</code> not launching a new <code>ImageRequest</code> if its <code>ContentScale</code> changes to/from <code>None</code>.</li> <li>Update Kotlin to 2.1.10.<ul> <li>NOTE: This release requires compiling with Kotlin 2.1.0 or greater if you use Kotlin native due to an <a href=https://kotlinlang.org/docs/whatsnew21.html#llvm-update-from-11-1-0-to-16-0-0>LLVM update</a>.</li> </ul> </li> <li>Update Compose to 1.7.3.</li> <li>Update <code>androidx.core</code> to 1.15.0.</li> </ul> <h2 id=304-november-25-2024>[3.0.4] - November 25, 2024<a class=headerlink href=#304-november-25-2024 title="Permanent link">&para;</a></h2> <ul> <li>Fix vector drawables not rendering in the Android Studio preview.</li> <li>Fix potential memory cache miss for requests whose size exceeds <code>maxBitmapSize</code>.</li> <li>Fix <code>FakeImage</code> not rendering on Android.</li> <li>Fix not launching a new image request when the request's <code>Transformation</code>s change when used with <code>AsyncImage</code>/<code>rememberAsyncImagePainter</code>/<code>SubcomposeAsyncImage</code>.</li> <li>Fix <code>ScaleDrawable</code> and <code>CrossfadeDrawable</code> not respecting tint states.</li> <li>Allow <code>ImageDecoder</code> to decode partial image sources. This matches the behavior in <code>BitmapFactory</code>.</li> <li>Fix <code>Bitmap.prepareToDraw()</code> not being called after decoding.</li> <li><code>SvgDecoder</code> should not return <code>isSampled = true</code> for non-rasterized images.</li> <li>Fall back to <code>Dispatchers.Unconfined</code> in Compose if an immediate main dispatcher is unavailable. This is only used in preview/test environments.</li> <li>Update Ktor 2 to <code>2.3.13</code>.</li> </ul> <h2 id=303-november-14-2024>[3.0.3] - November 14, 2024<a class=headerlink href=#303-november-14-2024 title="Permanent link">&para;</a></h2> <ul> <li>Fix setting <code>ImageRequest.scale</code> based on an <code>ImageView</code>'s <code>ScaleType</code>.</li> <li>Fix edge case where <code>DiskCache</code> would not track removal of an entry after deleting its files.</li> <li>Pass throwable to <code>Logger</code> when logging errors.</li> <li>Don't replace <code>kotlin-stdlib-jdk7</code> and <code>kotlin-stdlib-jdk8</code> with <code>kotlin-stdlib</code>.</li> </ul> <h2 id=302-november-9-2024>[3.0.2] - November 9, 2024<a class=headerlink href=#302-november-9-2024 title="Permanent link">&para;</a></h2> <ul> <li>Fix crash when invoking <code>OkHttpNetworkFetcherFactory</code> with a custom <code>CacheStrategy</code> on Android.</li> <li>Fix <code>CacheControlCacheStrategy</code> computing the age of a cache entry incorrectly.</li> <li>Fix case where <code>ImageRequest.bitmapConfig</code> would only be respected on &gt;= API 28 if it was <code>ARGB_8888</code> or <code>HARDWARE</code>.</li> </ul> <h2 id=301-november-7-2024>[3.0.1] - November 7, 2024<a class=headerlink href=#301-november-7-2024 title="Permanent link">&para;</a></h2> <ul> <li>Fix crash when calling <code>Image.toBitmap</code> with a hardware bitmap-backed <code>BitmapImage</code>.</li> <li>Fix <code>AsyncImageModelEqualityDelegate.Default</code> comparing equality incorrectly for non-<code>ImageRequest</code> models.</li> </ul> <h2 id=300-november-4-2024>[3.0.0] - November 4, 2024<a class=headerlink href=#300-november-4-2024 title="Permanent link">&para;</a></h2> <p>Coil 3.0.0 is the next major release of Coil with full support for <a href=https://www.jetbrains.com/compose-multiplatform/ >Compose Multiplatform</a>.</p> <p><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of improvements and important changes in 3.0.0, check out the upgrade guide</a>.</p> <p>Changes since <code>3.0.0-rc02</code>:</p> <ul> <li>Remove remaining deprecated methods.</li> </ul> <h2 id=300-rc02-october-28-2024>[3.0.0-rc02] - October 28, 2024<a class=headerlink href=#300-rc02-october-28-2024 title="Permanent link">&para;</a></h2> <p><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of improvements and important changes in 3.x, check out the upgrade guide</a>. Changes since <code>3.0.0-rc01</code>:</p> <ul> <li>Add <code>BlackholeDecoder</code>. This simplifies <a href=https://coil-kt.github.io/coil/faq/#how-do-i-preload-an-image>disk-cache only preloading</a>.</li> <li>Add <code>remember</code> functions for <code>ConstraintsSizeResolver</code> and <code>DrawScopeSizeResolver</code>.</li> <li>Remove <code>EqualityDelegate</code> as a parameter to <code>AsyncImage</code>. Instead, it should be set through <code>LocalAsyncImageModelEqualityDelegate</code>.</li> <li>Fix <code>AsyncImage</code> not rendering when parent composable uses <code>IntrinsicSize</code>.</li> <li>Fix <code>AsyncImage</code> filling the available constraints when <code>AsyncImagePainter</code> has no child painter.</li> <li>Fix <code>rememberAsyncImagePainter</code> recomposing infinitely when its state is observed due to <code>EqualityDelegate</code> being ignored.</li> <li>Fix parsing <code>File</code>/<code>Path</code> paths with special characters.</li> <li>Fix using custom <code>FileSystem</code> implementations with <code>VideoFrameDecoder</code>.</li> <li>Update Ktor to <code>3.0.0</code>.</li> <li>Update <code>androidx.annotation</code> to <code>1.9.0</code>.</li> </ul> <h2 id=300-rc01-october-8-2024>[3.0.0-rc01] - October 8, 2024<a class=headerlink href=#300-rc01-october-8-2024 title="Permanent link">&para;</a></h2> <p><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of improvements and important changes in 3.x, check out the upgrade guide</a>. Changes since <code>3.0.0-alpha10</code>:</p> <ul> <li><strong>BREAKING</strong> Disable <code>addLastModifiedToFileCacheKey</code> by default and allow it to be set per request. The behaviour can be reenabled with the same flag.</li> <li><strong>New</strong>: Introduce a new <code>coil-network-cache-control</code> artifact, which implements <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control><code>Cache-Control</code> header</a> support.</li> <li><strong>New</strong>: Add <code>scaleToDensity</code> property to <code>SvgDecoder.Factory</code>. This property ensure SVGs with intrinsic dimensions are multiplied by the devices density (only supported on Android).</li> <li>Rename <code>ExifOrientationPolicy</code> to <code>ExifOrientationStrategy</code>.</li> <li>Remove unshareable images from the <code>MemoryCache</code> on get.</li> <li>Make <code>ConstraintsSizeResolver</code> public.</li> <li>Stabilize <code>setSingletonImageLoaderFactory</code>.</li> <li>Restore optimized JVM I/O functions in <code>coil-network-ktor3</code></li> <li>Add <code>pdf</code> to list of mime types.</li> <li>Update compile sdk to 35.</li> <li>Update Kotlin to 2.0.20.</li> <li>Update Okio to 3.9.1.</li> </ul> <h2 id=300-alpha10-august-7-2024>[3.0.0-alpha10] - August 7, 2024<a class=headerlink href=#300-alpha10-august-7-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>BREAKING</strong>: Replace <code>ImageLoader.Builder.networkObserverEnabled</code> with a <code>ConnectivityChecker</code> interface for <code>NetworkFetcher</code>.<ul> <li>To disable the network observer, pass <code>ConnectivityChecker.ONLINE</code> to the constructor for <code>KtorNetworkFetcherFactory</code>/<code>OkHttpNetworkFetcherFactory</code>.</li> </ul> </li> <li><strong>New</strong>: Support loading <a href=https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-images-resources.html>Compose Multiplatform resources</a> on all platforms. To load a resource, use <code>Res.getUri</code>:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Res</span><span class=p>.</span><span class=na>getUri</span><span class=p>(</span><span class=s>&quot;drawable/image.jpg&quot;</span><span class=p>),</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span>
</code></pre></div> <ul> <li>Add <code>maxBitmapSize</code> property to <code>ImageLoader</code> and <code>ImageRequest</code>.<ul> <li>This property defaults to 4096x4096 and provides a safe upper bound for the dimensions of an allocated bitmap. This helps accidentally loading very large images with <code>Size.ORIGINAL</code> and causing an out of memory exception.</li> </ul> </li> <li>Convert <code>ExifOrientationPolicy</code> to be an interface to support custom policies.</li> <li>Fix <code>Uri</code> handling of Windows file paths.</li> <li>Remove <code>@ExperimentalCoilApi</code> from the <code>Image</code> APIs.</li> <li>Update Kotlin to 2.0.10.</li> </ul> <h2 id=300-alpha09-july-23-2024>[3.0.0-alpha09] - July 23, 2024<a class=headerlink href=#300-alpha09-july-23-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>BREAKING</strong>: Rename the <code>io.coil-kt.coil3:coil-network-ktor</code> artifact to <code>io.coil-kt.coil3:coil-network-ktor2</code> which depends on Ktor 2.x. Additionally, introduce <code>io.coil-kt.coil3:coil-network-ktor3</code> which depends on Ktor 3.x. <code>wasmJs</code> support is only available in Ktor 3.x.</li> <li><strong>New</strong>: Add <code>AsyncImagePainter.restart()</code> to manually restart an image request.</li> <li>Remove <code>@ExperimentalCoilApi</code> from <code>NetworkClient</code> and related classes.</li> <li>Optimize <code>ImageRequest</code> to avoid unnecessary <code>Extras</code> and <code>Map</code> allocations.</li> </ul> <h2 id=270-july-17-2024>[2.7.0] - July 17, 2024<a class=headerlink href=#270-july-17-2024 title="Permanent link">&para;</a></h2> <ul> <li>Slightly optimize internal coroutines usage to improve the performance of <code>ImageLoader.execute</code>, <code>AsyncImage</code>, <code>SubcomposeAsyncImage</code>, and <code>rememberAsyncImagePainter</code>. (<a href=https://github.com/coil-kt/coil/pull/2205>#2205</a>)</li> <li>Fix duplicate network calls for chunked responses. (<a href=https://github.com/coil-kt/coil/pull/2363>#2363</a>)</li> <li>Update Kotlin to 2.0.0.</li> <li>Update Compose UI to 1.6.8.</li> <li>Update Okio to 3.9.0.</li> </ul> <h2 id=300-alpha08-july-8-2024>[3.0.0-alpha08] - July 8, 2024<a class=headerlink href=#300-alpha08-july-8-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>BREAKING</strong>: Rename <code>ImageRequest</code> and <code>ImageLoader</code> <code>dispatcher</code> methods to <code>coroutineContext</code>. For instance, <code>ImageRequest.Builder.dispatcher</code> is now <code>ImageRequest.Builder.coroutineContext</code>. This was renamed as the method now accepts any <code>CoroutineContext</code> and no longer requires a <code>Dispatcher</code>.</li> <li>Fix: Fix <code>IllegalStateException: Reading a state that was created after the snapshot was taken or in a snapshot that has not yet been applied</code> which could occur due to a race condition.<ul> <li>NOTE: This reintroduces a soft dependency on <code>Dispatchers.Main.immediate</code>. As a result you should re-add a dependency on <a href=https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-swing/ ><code>kotlinx-coroutines-swing</code></a> on JVM. If it's not imported then <code>ImageRequest</code>s won't be dispatched immediately and will have one frame of delay before setting the <code>ImageRequest.placeholder</code> or resolving from the memory cache.</li> </ul> </li> </ul> <h2 id=300-alpha07-june-26-2024>[3.0.0-alpha07] - June 26, 2024<a class=headerlink href=#300-alpha07-june-26-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>BREAKING</strong>: <code>AsyncImagePainter</code> no longer waits for <code>onDraw</code> by default and instead uses <code>Size.ORIGINAL</code>.<ul> <li>This fixes <a href=https://github.com/coil-kt/coil/issues/1910>compatibility issues with Roborazzi/Paparazzi</a> and overall improves test reliability.</li> <li>To revert back to waiting for <code>onDraw</code>, set <code>DrawScopeSizeResolver</code> as your <code>ImageRequest.sizeResolver</code>.</li> </ul> </li> <li><strong>BREAKING</strong>: Refactor the multiplatform <code>Image</code> API. Notably, <code>asCoilImage</code> has been renamed to <code>asImage</code>.</li> <li><strong>BREAKING</strong>: <code>AsyncImagePainter.state</code> has been changed to <code>StateFlow&lt;AsyncImagePainter.State&gt;</code>. Use <code>collectAsState</code> to observe its value. This improves performance.</li> <li><strong>BREAKING</strong>: <code>AsyncImagePainter.imageLoader</code> and <code>AsyncImagePainter.request</code> have been combined into <code>StateFlow&lt;AsyncImagePainter.Inputs&gt;</code>. Use <code>collectAsState</code> to observe its value. This improves performance.</li> <li><strong>BREAKING</strong>: Remove support for <code>android.resource://example.package.name/drawable/image</code> URIs as it prevents resource shrinking optimizations.<ul> <li>If you still needs its functionality you can <a href=https://github.com/coil-kt/coil/blob/main/coil-core/src/androidInstrumentedTest/kotlin/coil3/map/ResourceUriMapper.kt>manually include <code>ResourceUriMapper</code> in your component registry</a>.</li> </ul> </li> <li><strong>New</strong>: Introduce <code>AsyncImagePreviewHandler</code> to support controlling <code>AsyncImagePainter</code>'s preview rendering behavior.<ul> <li>Use <code>LocalAsyncImagePreviewHandler</code> to override the preview behavior.</li> <li>As part of this change and other <code>coil-compose</code> improvements, <code>AsyncImagePainter</code> now attempts to execute execute the <code>ImageRequest</code> by default instead of defaulting to displaying <code>ImageRequest.placeholder</code>. <a href=https://developer.android.com/develop/ui/compose/tooling/previews#preview-limitations>Requests that use the network or files are expected to fail</a> in the preview environment, however Android resources should work.</li> </ul> </li> <li><strong>New</strong>: Support extracting video image by frame index. (<a href=https://github.com/coil-kt/coil/pull/2183>#2183</a>)</li> <li><strong>New</strong>: Support passing <code>CoroutineContext</code> to any <code>CoroutineDispatcher</code> methods. (<a href=https://github.com/coil-kt/coil/pull/2241>#2241</a>).</li> <li><strong>New</strong>: Support the weak reference memory cache on JS and WASM JS.</li> <li>Don't dispatch to <code>Dispatchers.Main.immediate</code> in Compose. As a side-effect, <a href=https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-swing/ ><code>kotlinx-coroutines-swing</code></a> no longer needs to be imported on JVM.</li> <li>Don't call <code>async</code> and create a disposable in Compose to improve performance (thanks @mlykotom!). (<a href=https://github.com/coil-kt/coil/pull/2205>#2205</a>)</li> <li>Fix passing global <code>ImageLoader</code> extras to <code>Options</code>. (<a href=https://github.com/coil-kt/coil/pull/2223>#2223</a>)</li> <li>Fix <code>crossfade(false)</code> not working on non-Android targets.</li> <li>Fix VP8X feature flags byte offset (<a href=https://github.com/coil-kt/coil/pull/2199>#2199</a>).</li> <li>Convert <code>SvgDecoder</code> on non-Android targets to render to a bitmap instead of render the image at draw-time. This improves performance.<ul> <li>This behavior can be controlled using <code>SvgDecoder(renderToBitmap)</code>.</li> </ul> </li> <li>Move <code>ScaleDrawable</code> from <code>coil-gif</code> to <code>coil-core</code>.</li> <li>Update Kotlin to 2.0.0.</li> <li>Update Compose to 1.6.11.</li> <li>Update Okio to 3.9.0.</li> <li>Update Skiko to 0.8.4.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes in 3.x, check out the upgrade guide.</a></li> </ul> <h2 id=300-alpha06-february-29-2024>[3.0.0-alpha06] - February 29, 2024<a class=headerlink href=#300-alpha06-february-29-2024 title="Permanent link">&para;</a></h2> <ul> <li>Downgrade Skiko to 0.7.93.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes in 3.x, check out the upgrade guide.</a></li> </ul> <h2 id=300-alpha05-february-28-2024>[3.0.0-alpha05] - February 28, 2024<a class=headerlink href=#300-alpha05-february-28-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Support the <code>wasmJs</code> target.</li> <li>Create <code>DrawablePainter</code> and <code>DrawableImage</code> to support drawing <code>Image</code>s that aren't backed by a <code>Bitmap</code> on non-Android platforms.<ul> <li>The <code>Image</code> APIs are experimental and likely to change between alpha releases.</li> </ul> </li> <li>Update <code>ContentPainterModifier</code> to implement <code>Modifier.Node</code>.</li> <li>Fix: Lazily register component callbacks and the network observer on a background thread. This fixes slow initialization that would typically occur on the main thread.</li> <li>Fix: Fix <code>ImageLoader.Builder.placeholder/error/fallback</code> not being used by <code>ImageRequest</code>.</li> <li>Update Compose to 1.6.0.</li> <li>Update Coroutines to 1.8.0.</li> <li>Update Okio to 3.8.0.</li> <li>Update Skiko to 0.7.94.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes in 3.x, check out the upgrade guide.</a></li> </ul> <h2 id=260-february-23-2024>[2.6.0] - February 23, 2024<a class=headerlink href=#260-february-23-2024 title="Permanent link">&para;</a></h2> <ul> <li>Make <code>rememberAsyncImagePainter</code>, <code>AsyncImage</code>, and <code>SubcomposeAsyncImage</code> <a href=https://developer.android.com/jetpack/compose/performance/stability#functions>restartable and skippable</a>. This improves performance by avoiding recomposition unless one of the composable's arguments changes.<ul> <li>Add an optional <code>modelEqualityDelegate</code> argument to <code>rememberAsyncImagePainter</code>, <code>AsyncImage</code>, and <code>SubcomposeAsyncImage</code> to control whether the <code>model</code> will trigger a recomposition.</li> </ul> </li> <li>Update <code>ContentPainterModifier</code> to implement <code>Modifier.Node</code>.</li> <li>Fix: Lazily register component callbacks and the network observer on a background thread. This fixes slow initialization that would typically occur on the main thread.</li> <li>Fix: Avoid relaunching a new image request in <code>rememberAsyncImagePainter</code>, <code>AsyncImage</code>, and <code>SubcomposeAsyncImage</code> if <code>ImageRequest.listener</code> or <code>ImageRequest.target</code> change.</li> <li>Fix: Don't observe the image request twice in <code>AsyncImagePainter</code>.</li> <li>Update Kotlin to 1.9.22.</li> <li>Update Compose to 1.6.1.</li> <li>Update Okio to 3.8.0.</li> <li>Update <code>androidx.collection</code> to 1.4.0.</li> <li>Update <code>androidx.lifecycle</code> to 2.7.0.</li> </ul> <h2 id=300-alpha04-february-1-2024>[3.0.0-alpha04] - February 1, 2024<a class=headerlink href=#300-alpha04-february-1-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: Remove <code>Lazy</code> from <code>OkHttpNetworkFetcherFactory</code> and <code>KtorNetworkFetcherFactory</code>'s public API.</li> <li>Expose <code>Call.Factory</code> instead of <code>OkHttpClient</code> in <code>OkHttpNetworkFetcherFactory</code>.</li> <li>Convert <code>NetworkResponseBody</code> to wrap a <code>ByteString</code>.</li> <li>Downgrade Compose to 1.5.12.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes, check out the upgrade guide.</a></li> </ul> <h2 id=300-alpha03-january-20-2024>[3.0.0-alpha03] - January 20, 2024<a class=headerlink href=#300-alpha03-january-20-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>coil-network</code> has been renamed to <code>coil-network-ktor</code>. Additionally, there is a new <code>coil-network-okhttp</code> artifact that depends on OkHttp and doesn't require specifying a Ktor engine.<ul> <li>Depending on which artifact you import you can reference the <code>Fetcher.Factory</code> manually using <code>KtorNetworkFetcherFactory</code> or <code>OkHttpNetworkFetcherFactory</code>.</li> </ul> </li> <li>Support loading <code>NSUrl</code> on Apple platforms.</li> <li>Add <code>clipToBounds</code> parameter to <code>AsyncImage</code>.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes, check out the upgrade guide.</a></li> </ul> <h2 id=300-alpha02-january-10-2024>[3.0.0-alpha02] - January 10, 2024<a class=headerlink href=#300-alpha02-january-10-2024 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>coil-gif</code>, <code>coil-network</code>, <code>coil-svg</code>, and <code>coil-video</code>'s packages have been updated so all their classes are part of <code>coil.gif</code>, <code>coil.network</code>, <code>coil.svg</code>, and <code>coil.video</code> respectively. This helps avoid class name conflicts with other artifacts.</li> <li><strong>Breaking</strong>: <code>ImageDecoderDecoder</code> has been renamed to <code>AnimatedImageDecoder</code>.</li> <li><strong>New</strong>: <code>coil-gif</code>, <code>coil-network</code>, <code>coil-svg</code>, and <code>coil-video</code>'s components are now automatically added to each <code>ImageLoader</code>'s <code>ComponentRegistry</code>.<ul> <li>To be clear, unlike <code>3.0.0-alpha01</code> <strong>you do not need to manually add <code>NetworkFetcher.Factory()</code> to your <code>ComponentRegistry</code></strong>. Simply importing <code>io.coil-kt.coil3:coil-network:[version]</code> and <a href=https://ktor.io/docs/http-client-engines.html#dependencies>a Ktor engine</a> is enough to load network images.</li> <li>It's safe to also add these components to <code>ComponentRegistry</code> manually. Any manually added components take precedence over components that are added automatically.</li> <li>If preferred, this behaviour can be disabled using <code>ImageLoader.Builder.serviceLoaderEnabled(false)</code>.</li> </ul> </li> <li><strong>New</strong>: Support <code>coil-svg</code> on all platforms. It's backed by <a href=https://bigbadaboom.github.io/androidsvg/ >AndroidSVG</a> on Android and <a href=https://api.skia.org/classSkSVGDOM.html>SVGDOM</a> on non-Android platforms.</li> <li>Coil now uses Android's <a href=https://developer.android.com/reference/android/graphics/ImageDecoder><code>ImageDecoder</code></a> API internally, which has performance benefits when decoding directly from a file, resource, or content URI.</li> <li>Fix: Multiple <code>coil3.Uri</code> parsing fixes.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes, check out the upgrade guide.</a></li> </ul> <h2 id=300-alpha01-december-30-2023>[3.0.0-alpha01] - December 30, 2023<a class=headerlink href=#300-alpha01-december-30-2023 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: <a href=https://www.jetbrains.com/lp/compose-multiplatform/ >Compose Multiplatform</a> support. Coil is now a Kotlin Multiplatform library that supports Android, JVM, iOS, macOS, and Javascript.</li> <li>Coil's Maven coordinates were updated to <code>io.coil-kt.coil3</code> and its imports were updated to <code>coil3</code>. This allows Coil 3 to run side by side with Coil 2 without binary compatibility issues. For example, <code>io.coil-kt:coil:[version]</code> is now <code>io.coil-kt.coil3:coil:[version]</code>.</li> <li>The <code>coil-base</code> and <code>coil-compose-base</code> artifacts were renamed to <code>coil-core</code> and <code>coil-compose-core</code> respectively to align with the naming conventions used by Coroutines, Ktor, and AndroidX.</li> <li><a href=https://coil-kt.github.io/coil/upgrading_to_coil3/ >For the full list of important changes, check out the upgrade guide.</a></li> </ul> <h2 id=250-october-30-2023>[2.5.0] - October 30, 2023<a class=headerlink href=#250-october-30-2023 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>MediaDataSourceFetcher.Factory</code> to support decoding <code>MediaDataSource</code> implementations in <code>coil-video</code>. (<a href=https://github.com/coil-kt/coil/pull/1795>#1795</a>)</li> <li>Add the <code>SHIFT6m</code> device to the hardware bitmap blocklist. (<a href=https://github.com/coil-kt/coil/pull/1812>#1812</a>)</li> <li>Fix: Guard against painters that return a size with one unbounded dimension. (<a href=https://github.com/coil-kt/coil/pull/1826>#1826</a>)</li> <li>Fix: Disk cache load fails after <code>304 Not Modified</code> when cached headers include non-ASCII characters. (<a href=https://github.com/coil-kt/coil/pull/1839>#1839</a>)</li> <li>Fix: <code>FakeImageEngine</code> not updating the interceptor chain's request. (<a href=https://github.com/coil-kt/coil/pull/1905>#1905</a>)</li> <li>Update compile SDK to 34.</li> <li>Update Kotlin to 1.9.10.</li> <li>Update Coroutines to 1.7.3.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.32.0.</li> <li>Update <code>androidx.annotation</code> to 1.7.0.</li> <li>Update <code>androidx.compose.foundation</code> to 1.5.4.</li> <li>Update <code>androidx.core</code> to 1.12.0.</li> <li>Update <code>androidx.exifinterface:exifinterface</code> to 1.3.6.</li> <li>Update <code>androidx.lifecycle</code> to 2.6.2.</li> <li>Update <code>com.squareup.okhttp3</code> to 4.12.0.</li> <li>Update <code>com.squareup.okio</code> to 3.6.0.</li> </ul> <h2 id=240-may-21-2023>[2.4.0] - May 21, 2023<a class=headerlink href=#240-may-21-2023 title="Permanent link">&para;</a></h2> <ul> <li>Rename <code>DiskCache</code> <code>get</code>/<code>edit</code> to <code>openSnapshot</code>/<code>openEditor</code>.</li> <li>Don't automatically convert <code>ColorDrawable</code> to <code>ColorPainter</code> in <code>AsyncImagePainter</code>.</li> <li>Annotate simple <code>AsyncImage</code> overloads with <code>@NonRestartableComposable</code>.</li> <li>Fix: Call <code>Context.cacheDir</code> lazily in <code>ImageSource</code>.</li> <li>Fix: Fix publishing <code>coil-bom</code>.</li> <li>Fix: Fix always setting bitmap config to <code>ARGB_8888</code> if hardware bitmaps are disabled.</li> <li>Update Kotlin to 1.8.21.</li> <li>Update Coroutines to 1.7.1.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.30.1.</li> <li>Update <code>androidx.compose.foundation</code> to 1.4.3.</li> <li>Update <code>androidx.profileinstaller:profileinstaller</code> to 1.3.1.</li> <li>Update <code>com.squareup.okhttp3</code> to 4.11.0.</li> </ul> <h2 id=230-march-25-2023>[2.3.0] - March 25, 2023<a class=headerlink href=#230-march-25-2023 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Introduce a new <code>coil-test</code> artifact, which includes <code>FakeImageLoaderEngine</code>. This class is useful for hardcoding image loader responses to ensure consistent and synchronous (from the main thread) responses in tests. See <a href=https://coil-kt.github.io/coil/testing>here</a> for more info.</li> <li><strong>New</strong>: Add <a href=https://developer.android.com/topic/performance/baselineprofiles/overview>baseline profiles</a> to <code>coil-base</code> (child module of <code>coil</code>) and <code>coil-compose-base</code> (child module of <code>coil-compose</code>).<ul> <li>This improves Coil's runtime performance and should offer <a href=https://github.com/coil-kt/coil/tree/main/coil-benchmark/benchmark_output.md>better frame timings</a> depending on how Coil is used in your app.</li> </ul> </li> <li>Fix: Fix parsing <code>file://</code> URIs with encoded data. <a href=https://github.com/coil-kt/coil/pull/1601>#1601</a></li> <li>Fix: <code>DiskCache</code> now properly computes its maximum size if passed a directory that does not exist. <a href=https://github.com/coil-kt/coil/pull/1620>#1620</a></li> <li>Make <code>Coil.reset</code> public API. <a href=https://github.com/coil-kt/coil/pull/1506>#1506</a></li> <li>Enable Java default method generation. <a href=https://github.com/coil-kt/coil/pull/1491>#1491</a></li> <li>Update Kotlin to 1.8.10.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.30.0.</li> <li>Update <code>androidx.annotation</code> to 1.6.0.</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.6.1.</li> <li>Update <code>androidx.compose.foundation</code> to 1.4.0.</li> <li>Update <code>androidx.core</code> to 1.9.0.</li> <li>Update <code>androidx.exifinterface:exifinterface</code> to 1.3.6.</li> <li>Update <code>androidx.lifecycle</code> to 2.6.1.</li> <li>Update <code>okio</code> to 3.3.0.</li> </ul> <h2 id=222-october-1-2022>[2.2.2] - October 1, 2022<a class=headerlink href=#222-october-1-2022 title="Permanent link">&para;</a></h2> <ul> <li>Ensure an image loader is fully initialized before registering its system callbacks. <a href=https://github.com/coil-kt/coil/pull/1465>#1465</a></li> <li>Set the preferred bitmap config in <code>VideoFrameDecoder</code> on API 30+ to avoid banding. <a href=https://github.com/coil-kt/coil/pull/1487>#1487</a></li> <li>Fix parsing paths containing <code>#</code> in <code>FileUriMapper</code>. <a href=https://github.com/coil-kt/coil/pull/1466>#1466</a></li> <li>Fix reading responses with non-ascii headers from the disk cache. <a href=https://github.com/coil-kt/coil/pull/1468>#1468</a></li> <li>Fix decoding videos inside asset subfolders. <a href=https://github.com/coil-kt/coil/pull/1489>#1489</a></li> <li>Update <code>androidx.annotation</code> to 1.5.0.</li> </ul> <h2 id=221-september-8-2022>[2.2.1] - September 8, 2022<a class=headerlink href=#221-september-8-2022 title="Permanent link">&para;</a></h2> <ul> <li>Fix: <code>RoundedCornersTransformation</code> now properly scales the <code>input</code> bitmap.</li> <li>Remove dependency on the <code>kotlin-parcelize</code> plugin.</li> <li>Update compile SDK to 33.</li> <li>Downgrade <code>androidx.appcompat:appcompat-resources</code> to 1.4.2 to work around <a href=https://github.com/coil-kt/coil/issues/1423>#1423</a>.</li> </ul> <h2 id=220-august-16-2022>[2.2.0] - August 16, 2022<a class=headerlink href=#220-august-16-2022 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>ImageRequest.videoFramePercent</code> to <code>coil-video</code> to support specifying the video frame as a percent of the video's duration.</li> <li><strong>New</strong>: Add <code>ExifOrientationPolicy</code> to configure how <code>BitmapFactoryDecoder</code> treats EXIF orientation data.</li> <li>Fix: Don't throw an exception in <code>RoundedCornersTransformation</code> if passed a size with an undefined dimension.</li> <li>Fix: Read a GIF's frame delay as two unsigned bytes instead of one signed byte.</li> <li>Update Kotlin to 1.7.10.</li> <li>Update Coroutines to 1.6.4.</li> <li>Update Compose to 1.2.1.</li> <li>Update OkHttp to 4.10.0.</li> <li>Update Okio to 3.2.0.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.25.1.</li> <li>Update <code>androidx.annotation</code> to 1.4.0.</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.5.0.</li> <li>Update <code>androidx.core</code> to 1.8.0.</li> </ul> <h2 id=210-may-17-2022>[2.1.0] - May 17, 2022<a class=headerlink href=#210-may-17-2022 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Support loading <code>ByteArray</code>s. (<a href=https://github.com/coil-kt/coil/pull/1202>#1202</a>)</li> <li><strong>New</strong>: Support setting custom CSS rules for SVGs using <code>ImageRequest.Builder.css</code>. (<a href=https://github.com/coil-kt/coil/pull/1210>#1210</a>)</li> <li>Fix: Convert <code>GenericViewTarget</code>'s private methods to protected. (<a href=https://github.com/coil-kt/coil/pull/1273>#1273</a>)</li> <li>Update compile SDK to 32. (<a href=https://github.com/coil-kt/coil/pull/1268>#1268</a>)</li> </ul> <h2 id=200-may-10-2022>[2.0.0] - May 10, 2022<a class=headerlink href=#200-may-10-2022 title="Permanent link">&para;</a></h2> <p>Coil 2.0.0 is a major iteration of the library and includes breaking changes. Check out the <a href=https://coil-kt.github.io/coil/upgrading/ >upgrade guide</a> for how to upgrade.</p> <ul> <li><strong>New</strong>: Introduce <code>AsyncImage</code> in <code>coil-compose</code>. Check out <a href=https://coil-kt.github.io/coil/compose/ >the documentation</a> for more info.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>// Display an image from the network.</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>,</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=p>)</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1>// Display an image from the network with a placeholder, circle crop, and crossfade animation.</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>LocalContext</span><span class=p>.</span><span class=na>current</span><span class=p>)</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>        </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>        </span><span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=n>placeholder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>painterResource</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=na>drawable</span><span class=p>.</span><span class=na>placeholder</span><span class=p>),</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringResource</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=na>string</span><span class=p>.</span><span class=na>description</span><span class=p>),</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>    </span><span class=n>contentScale</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ContentScale</span><span class=p>.</span><span class=na>Crop</span><span class=p>,</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>    </span><span class=n>modifier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Modifier</span><span class=p>.</span><span class=na>clip</span><span class=p>(</span><span class=n>CircleShape</span><span class=p>)</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=p>)</span>
</code></pre></div> <ul> <li><strong>New</strong>: Introduce a public <code>DiskCache</code> API.<ul> <li>Use <code>ImageLoader.Builder.diskCache</code> and <code>DiskCache.Builder</code> to configure the disk cache.</li> <li>You should not use OkHttp's <code>Cache</code> with Coil 2.0. See <a href=https://coil-kt.github.io/coil/upgrading_to_coil2/#disk-cache>here</a> for more info.</li> <li><code>Cache-Control</code> and other cache headers are still supported - except <code>Vary</code> headers, as the cache only checks that the URLs match. Additionally, only responses with a response code in the range [200..300) are cached.</li> <li>Existing disk caches will be cleared when upgrading to 2.0.</li> </ul> </li> <li>The minimum supported API is now 21.</li> <li><code>ImageRequest</code>'s default <code>Scale</code> is now <code>Scale.FIT</code>.<ul> <li>This was changed to make <code>ImageRequest.scale</code> consistent with other classes that have a default <code>Scale</code>.</li> <li>Requests with an <code>ImageViewTarget</code> still have their <code>Scale</code> auto-detected.</li> </ul> </li> <li>Rework the image pipeline classes:<ul> <li><code>Mapper</code>, <code>Fetcher</code>, and <code>Decoder</code> have been refactored to be more flexible.</li> <li><code>Fetcher.key</code> has been replaced with a new <code>Keyer</code> interface. <code>Keyer</code> creates the cache key from the input data.</li> <li>Add <code>ImageSource</code>, which allows <code>Decoder</code>s to read <code>File</code>s directly using Okio's file system API.</li> </ul> </li> <li>Rework the Jetpack Compose integration:<ul> <li><code>rememberImagePainter</code> and <code>ImagePainter</code> have been renamed to <code>rememberAsyncImagePainter</code> and <code>AsyncImagePainter</code> respectively.</li> <li>Deprecate <code>LocalImageLoader</code>. Check out the deprecation message for more info.</li> </ul> </li> <li>Disable generating runtime not-null assertions.<ul> <li>If you use Java, passing null as a not-null annotated argument to a function will no longer throw a <code>NullPointerException</code> immediately. Kotlin's compile-time null safety guards against this happening.</li> <li>This change allows the library's size to be smaller.</li> </ul> </li> <li><code>Size</code> is now composed of two <code>Dimension</code> values for its width and height. <code>Dimension</code> can either be a positive pixel value or <code>Dimension.Undefined</code>. See <a href=https://coil-kt.github.io/coil/upgrading/#size-refactor>here</a> for more info.</li> <li><code>BitmapPool</code> and <code>PoolableViewTarget</code> have been removed from the library.</li> <li><code>VideoFrameFileFetcher</code> and <code>VideoFrameUriFetcher</code> have been removed from the library. Use <code>VideoFrameDecoder</code> instead, which supports all data sources.</li> <li><a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/BlurTransformation.kt><code>BlurTransformation</code></a> and <a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/GrayscaleTransformation.kt><code>GrayscaleTransformation</code></a> are removed from the library. If you use them, you can copy their code into your project.</li> <li>Change <code>Transition.transition</code> to be a non-suspending function as it's no longer needed to suspend the transition until it completes.</li> <li>Add support for <code>bitmapFactoryMaxParallelism</code>, which restricts the maximum number of in-progress <code>BitmapFactory</code> operations. This value is 4 by default, which improves UI performance.</li> <li>Add support for <code>interceptorDispatcher</code>, <code>fetcherDispatcher</code>, <code>decoderDispatcher</code>, and <code>transformationDispatcher</code>.</li> <li>Add <code>GenericViewTarget</code>, which handles common <code>ViewTarget</code> logic.</li> <li>Add <code>ByteBuffer</code> to the default supported data types.</li> <li><code>Disposable</code> has been refactored and exposes the underlying <code>ImageRequest</code>'s job.</li> <li>Rework the <code>MemoryCache</code> API.</li> <li><code>ImageRequest.error</code> is now set on the <code>Target</code> if <code>ImageRequest.fallback</code> is null.</li> <li><code>Transformation.key</code> is replaced with <code>Transformation.cacheKey</code>.</li> <li>Update Kotlin to 1.6.10.</li> <li>Update Compose to 1.1.1.</li> <li>Update OkHttp to 4.9.3.</li> <li>Update Okio to 3.0.0.</li> </ul> <p>Changes from <code>2.0.0-rc03</code>: - Convert <code>Dimension.Original</code> to be <code>Dimension.Undefined</code>. - This changes the semantics of the non-pixel dimension slightly to fix some edge cases (<a href=https://github.com/coil-kt/coil/issues/1246>example</a>) in the size system. - Load images with <code>Size.ORIGINAL</code> if ContentScale is None. - Fix applying <code>ImageView.load</code> builder argument first instead of last. - Fix not combining HTTP headers if response is not modified.</p> <h2 id=200-rc03-april-11-2022>[2.0.0-rc03] - April 11, 2022<a class=headerlink href=#200-rc03-april-11-2022 title="Permanent link">&para;</a></h2> <ul> <li>Remove the <code>ScaleResolver</code> interface.</li> <li>Convert <code>Size</code> constructors to functions.</li> <li>Change <code>Dimension.Pixels</code>'s <code>toString</code> to only be its pixel value.</li> <li>Guard against a rare crash in <code>SystemCallbacks.onTrimMemory</code>.</li> <li>Update Coroutines to 1.6.1.</li> </ul> <h2 id=200-rc02-march-20-2022>[2.0.0-rc02] - March 20, 2022<a class=headerlink href=#200-rc02-march-20-2022 title="Permanent link">&para;</a></h2> <ul> <li>Revert <code>ImageRequest</code>'s default size to be the size of the current display instead of <code>Size.ORIGINAL</code>.</li> <li>Fix <code>DiskCache.Builder</code> being marked as experimental. Only <code>DiskCache</code>'s methods are experimental.</li> <li>Fix case where loading an image into an <code>ImageView</code> with one dimension as <code>WRAP_CONTENT</code> would load the image at its original size instead of fitting it into the bounded dimension.</li> <li>Remove component functions from <code>MemoryCache.Key</code>, <code>MemoryCache.Value</code>, and <code>Parameters.Entry</code>.</li> </ul> <h2 id=200-rc01-march-2-2022>[2.0.0-rc01] - March 2, 2022<a class=headerlink href=#200-rc01-march-2-2022 title="Permanent link">&para;</a></h2> <p>Significant changes since <code>1.4.0</code>:</p> <ul> <li>The minimum supported API is now 21.</li> <li>Rework the Jetpack Compose integration.<ul> <li><code>rememberImagePainter</code> has been renamed to <code>rememberAsyncImagePainter</code>.</li> <li>Add support for <code>AsyncImage</code> and <code>SubcomposeAsyncImage</code>. Check out <a href=https://coil-kt.github.io/coil/compose/ >the documentation</a> for more info.</li> <li>Deprecate <code>LocalImageLoader</code>. Check out the deprecation message for more info.</li> </ul> </li> <li>Coil 2.0 has its own disk cache implementation and no longer relies on OkHttp for disk caching.<ul> <li>Use <code>ImageLoader.Builder.diskCache</code> and <code>DiskCache.Builder</code> to configure the disk cache.</li> <li>You <strong>should not</strong> use OkHttp's <code>Cache</code> with Coil 2.0 as the cache can be corrupted if a thread is interrupted while writing to it.</li> <li><code>Cache-Control</code> and other cache headers are still supported - except <code>Vary</code> headers, as the cache only checks that the URLs match. Additionally, only responses with a response code in the range [200..300) are cached.</li> <li>Existing disk caches will be cleared when upgrading to 2.0.</li> </ul> </li> <li><code>ImageRequest</code>'s default <code>Scale</code> is now <code>Scale.FIT</code>.<ul> <li>This was changed to make <code>ImageRequest.scale</code> consistent with other classes that have a default <code>Scale</code>.</li> <li>Requests with an <code>ImageViewTarget</code> still have their <code>Scale</code> auto-detected.</li> </ul> </li> <li><code>ImageRequest</code>'s default size is now <code>Size.ORIGINAL</code>.</li> <li>Rework the image pipeline classes:<ul> <li><code>Mapper</code>, <code>Fetcher</code>, and <code>Decoder</code> have been refactored to be more flexible.</li> <li><code>Fetcher.key</code> has been replaced with a new <code>Keyer</code> interface. <code>Keyer</code> creates the cache key from the input data.</li> <li>Add <code>ImageSource</code>, which allows <code>Decoder</code>s to read <code>File</code>s directly using Okio's file system API.</li> </ul> </li> <li>Disable generating runtime not-null assertions.<ul> <li>If you use Java, passing null as a not-null annotated parameter to a function will no longer throw a <code>NullPointerException</code> immediately. Kotlin's compile-time null safety guards against this happening.</li> <li>This change allows the library's size to be smaller.</li> </ul> </li> <li><code>Size</code> is now composed of two <code>Dimension</code> values for its width and height. <code>Dimension</code> can either be a positive pixel value or <code>Dimension.Original</code>.</li> <li><code>BitmapPool</code> and <code>PoolableViewTarget</code> have been removed from the library.</li> <li><code>VideoFrameFileFetcher</code> and <code>VideoFrameUriFetcher</code> are removed from the library. Use <code>VideoFrameDecoder</code> instead, which supports all data sources.</li> <li><a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/BlurTransformation.kt><code>BlurTransformation</code></a> and <a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/GrayscaleTransformation.kt><code>GrayscaleTransformation</code></a> are removed from the library. If you use them, you can copy their code into your project.</li> <li>Change <code>Transition.transition</code> to be a non-suspending function as it's no longer needed to suspend the transition until it completes.</li> <li>Add support for <code>bitmapFactoryMaxParallelism</code>, which restricts the maximum number of in-progress <code>BitmapFactory</code> operations. This value is 4 by default, which improves UI performance.</li> <li>Add support for <code>interceptorDispatcher</code>, <code>fetcherDispatcher</code>, <code>decoderDispatcher</code>, and <code>transformationDispatcher</code>.</li> <li>Add <code>GenericViewTarget</code>, which handles common <code>ViewTarget</code> logic.</li> <li>Add <code>ByteBuffer</code> to the default supported data types.</li> <li><code>Disposable</code> has been refactored and exposes the underlying <code>ImageRequest</code>'s job.</li> <li>Rework the <code>MemoryCache</code> API.</li> <li><code>ImageRequest.error</code> is now set on the <code>Target</code> if <code>ImageRequest.fallback</code> is null.</li> <li><code>Transformation.key</code> is replaced with <code>Transformation.cacheKey</code>.</li> <li>Update Kotlin to 1.6.10.</li> <li>Update Compose to 1.1.1.</li> <li>Update OkHttp to 4.9.3.</li> <li>Update Okio to 3.0.0.</li> </ul> <p>Changes since <code>2.0.0-alpha09</code>:</p> <ul> <li>Remove the <code>-Xjvm-default=all</code> compiler flag.</li> <li>Fix failing to load image if multiple requests with must-revalidate/e-tag are executed concurrently.</li> <li>Fix <code>DecodeUtils.isSvg</code> returning false if there is a new line character after the <code>&lt;svg</code> tag.</li> <li>Make <code>LocalImageLoader.provides</code> deprecation message clearer.</li> <li>Update Compose to 1.1.1.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.23.1.</li> </ul> <h2 id=200-alpha09-february-16-2022>[2.0.0-alpha09] - February 16, 2022<a class=headerlink href=#200-alpha09-february-16-2022 title="Permanent link">&para;</a></h2> <ul> <li>Fix <code>AsyncImage</code> creating invalid constraints. (<a href=https://github.com/coil-kt/coil/pull/1134>#1134</a>)</li> <li>Add <code>ContentScale</code> argument to <code>AsyncImagePainter</code>. (<a href=https://github.com/coil-kt/coil/pull/1144>#1144</a>)<ul> <li>This should be set to the same value that's set on <code>Image</code> to ensure that the image is loaded at the correct size.</li> </ul> </li> <li>Add <code>ScaleResolver</code> to support lazily resolving the <code>Scale</code> for an <code>ImageRequest</code>. (<a href=https://github.com/coil-kt/coil/pull/1134>#1134</a>)<ul> <li><code>ImageRequest.scale</code> should be replaced by <code>ImageRequest.scaleResolver.scale()</code>.</li> </ul> </li> <li>Update Compose to 1.1.0.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.23.0.</li> <li>Update <code>androidx.lifecycle</code> to 2.4.1.</li> </ul> <h2 id=200-alpha08-february-7-2022>[2.0.0-alpha08] - February 7, 2022<a class=headerlink href=#200-alpha08-february-7-2022 title="Permanent link">&para;</a></h2> <ul> <li>Update <code>DiskCache</code> and <code>ImageSource</code> to use to Okio's <code>FileSystem</code> API. (<a href=https://github.com/coil-kt/coil/pull/1115>#1115</a>)</li> </ul> <h2 id=200-alpha07-january-30-2022>[2.0.0-alpha07] - January 30, 2022<a class=headerlink href=#200-alpha07-january-30-2022 title="Permanent link">&para;</a></h2> <ul> <li>Significantly improve <code>AsyncImage</code> performance and split <code>AsyncImage</code> into <code>AsyncImage</code> and <code>SubcomposeAsyncImage</code>. (<a href=https://github.com/coil-kt/coil/pull/1048>#1048</a>)<ul> <li><code>SubcomposeAsyncImage</code> provides <code>loading</code>/<code>success</code>/<code>error</code>/<code>content</code> slot APIs and uses subcomposition which has worse performance.</li> <li><code>AsyncImage</code> provides <code>placeholder</code>/<code>error</code>/<code>fallback</code> arguments to overwrite the <code>Painter</code> that's drawn when loading or if the request is unsuccessful. <code>AsyncImage</code> does not use subcomposition and has much better performance than <code>SubcomposeAsyncImage</code>.</li> <li>Remove <code>AsyncImagePainter.State</code> argument from <code>SubcomposeAsyncImage.content</code>. Use <code>painter.state</code> if needed.</li> <li>Add <code>onLoading</code>/<code>onSuccess</code>/<code>onError</code> callbacks to both <code>AsyncImage</code> and <code>SubcomposeAsyncImage</code>.</li> </ul> </li> <li>Deprecate <code>LocalImageLoader</code>. (<a href=https://github.com/coil-kt/coil/pull/1101>#1101</a>)</li> <li>Add support for <code>ImageRequest.tags</code>. (<a href=https://github.com/coil-kt/coil/pull/1066>#1066</a>)</li> <li>Move <code>isGif</code>, <code>isWebP</code>, <code>isAnimatedWebP</code>, <code>isHeif</code>, and <code>isAnimatedHeif</code> in <code>DecodeUtils</code> into coil-gif. Add <code>isSvg</code> to coil-svg. (<a href=https://github.com/coil-kt/coil/pull/1117>#1117</a>)</li> <li>Convert <code>FetchResult</code> and <code>DecodeResult</code> to be non-data classes. (<a href=https://github.com/coil-kt/coil/pull/1114>#1114</a>)</li> <li>Remove unused <code>DiskCache.Builder</code> context argument. (<a href=https://github.com/coil-kt/coil/pull/1099>#1099</a>)</li> <li>Fix scaling for bitmap resources with original size. (<a href=https://github.com/coil-kt/coil/pull/1072>#1072</a>)</li> <li>Fix failing to close <code>ImageDecoder</code> in <code>ImageDecoderDecoder</code>. (<a href=https://github.com/coil-kt/coil/pull/1109>#1109</a>)</li> <li>Fix incorrect scaling when converting a drawable to a bitmap. (<a href=https://github.com/coil-kt/coil/pull/1084>#1084</a>)</li> <li>Update Compose to 1.1.0-rc03.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.22.1-rc.</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.4.1.</li> </ul> <h2 id=200-alpha06-december-24-2021>[2.0.0-alpha06] - December 24, 2021<a class=headerlink href=#200-alpha06-december-24-2021 title="Permanent link">&para;</a></h2> <ul> <li>Add <code>ImageSource.Metadata</code> to support decoding from assets, resources, and content URIs without buffering or temporary files. (<a href=https://github.com/coil-kt/coil/pull/1060>#1060</a>)</li> <li>Delay executing the image request until <code>AsyncImage</code> has positive constraints. (<a href=https://github.com/coil-kt/coil/pull/1028>#1028</a>)</li> <li>Fix using <code>DefaultContent</code> for <code>AsyncImage</code> if <code>loading</code>, <code>success</code>, and <code>error</code> are all set. (<a href=https://github.com/coil-kt/coil/pull/1026>#1026</a>)</li> <li>Use androidx <code>LruCache</code> instead of the platform <code>LruCache</code>. (<a href=https://github.com/coil-kt/coil/pull/1047>#1047</a>)</li> <li>Update Kotlin to 1.6.10.</li> <li>Update Coroutines to 1.6.0.</li> <li>Update Compose to 1.1.0-rc01.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.22.0-rc.</li> <li>Update <code>androidx.collection</code> to 1.2.0.</li> </ul> <h2 id=200-alpha05-november-28-2021>[2.0.0-alpha05] - November 28, 2021<a class=headerlink href=#200-alpha05-november-28-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Refactor <code>Size</code> to support using the image's original size for either dimension.<ul> <li><code>Size</code> is now composed of two <code>Dimension</code> values for its width and height. <code>Dimension</code> can either be a positive pixel value or <code>Dimension.Original</code>.</li> <li>This change was made to better support unbounded width/height values (e.g. <code>wrap_content</code>, <code>Constraints.Infinity</code>) when one dimension is a fixed pixel value.</li> </ul> </li> <li>Fix: Support inspection mode (preview) for <code>AsyncImage</code>.</li> <li>Fix: <code>SuccessResult.memoryCacheKey</code> should always be <code>null</code> if <code>imageLoader.memoryCache</code> is null.</li> <li>Convert <code>ImageLoader</code>, <code>SizeResolver</code>, and <code>ViewSizeResolver</code> constructor-like <code>invoke</code> functions to top level functions.</li> <li>Make <code>CrossfadeDrawable</code> start and end drawables public API.</li> <li>Mutate <code>ImageLoader</code> placeholder/error/fallback drawables.</li> <li>Add default arguments to <code>SuccessResult</code>'s constructor.</li> <li>Depend on <code>androidx.collection</code> instead of <code>androidx.collection-ktx</code>.</li> <li>Update OkHttp to 4.9.3.</li> </ul> <h2 id=200-alpha04-november-22-2021>[2.0.0-alpha04] - November 22, 2021<a class=headerlink href=#200-alpha04-november-22-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>AsyncImage</code> to <code>coil-compose</code>.<ul> <li><code>AsyncImage</code> is a composable that executes an <code>ImageRequest</code> asynchronously and renders the result.</li> <li><strong><code>AsyncImage</code> is intended to replace <code>rememberImagePainter</code> for most use cases.</strong></li> <li>Its API is not final and may change before the final 2.0 release.</li> <li>It has a similar API to <code>Image</code> and supports the same arguments: <code>Alignment</code>, <code>ContentScale</code>, <code>alpha</code>, <code>ColorFilter</code>, and <code>FilterQuality</code>.</li> <li>It supports overwriting what's drawn for each <code>AsyncImagePainter</code> state using the <code>content</code>, <code>loading</code>, <code>success</code>, and <code>error</code> arguments.</li> <li>It fixes a number of design issues that <code>rememberImagePainter</code> has with resolving image size and scale.</li> <li>Example usages:</li> </ul> </li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>// Only draw the image.</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=c1>// Avoid `null` and set this to a localized string if possible.</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=p>)</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>// Draw the image with a circle crop, crossfade, and overwrite the `loading` state.</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>LocalContext</span><span class=p>.</span><span class=na>current</span><span class=p>)</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>        </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>        </span><span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>    </span><span class=n>modifier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Modifier</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>        </span><span class=p>.</span><span class=na>clip</span><span class=p>(</span><span class=n>CircleShape</span><span class=p>),</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>    </span><span class=n>loading</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>        </span><span class=n>CircularProgressIndicator</span><span class=p>()</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>    </span><span class=n>contentScale</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ContentScale</span><span class=p>.</span><span class=na>Crop</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=p>)</span>
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=c1>// Draw the image with a circle crop, crossfade, and overwrite all states.</span>
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>LocalContext</span><span class=p>.</span><span class=na>current</span><span class=p>)</span>
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=w>        </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=w>        </span><span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span>
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a><span class=w>    </span><span class=n>modifier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Modifier</span>
<a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a><span class=w>        </span><span class=p>.</span><span class=na>clip</span><span class=p>(</span><span class=n>CircleShape</span><span class=p>),</span>
<a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a><span class=w>    </span><span class=n>contentScale</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ContentScale</span><span class=p>.</span><span class=na>Crop</span>
<a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>state</span><span class=w> </span><span class=o>-&gt;</span>
<a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>state</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>AsyncImagePainter</span><span class=p>.</span><span class=na>State</span><span class=p>.</span><span class=na>Loading</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a><span class=w>        </span><span class=n>CircularProgressIndicator</span><span class=p>()</span>
<a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a><span class=w>        </span><span class=n>AsyncImageContent</span><span class=p>()</span><span class=w> </span><span class=c1>// Draws the image.</span>
<a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a><span class=p>}</span>
</code></pre></div> <ul> <li><strong>Important</strong>: Rename <code>ImagePainter</code> to <code>AsyncImagePainter</code> and <code>rememberImagePainter</code> to <code>rememberAsyncImagePainter</code>.<ul> <li><code>ExecuteCallback</code> is no longer supported. To have the <code>AsyncImagePainter</code> skip waiting for <code>onDraw</code> to be called, set <code>ImageRequest.size(OriginalSize)</code> (or any size) instead.</li> <li>Add an optional <code>FilterQuality</code> argument to <code>rememberAsyncImagePainter</code>.</li> </ul> </li> <li>Use coroutines for cleanup operations in <code>DiskCache</code> and add <code>DiskCache.Builder.cleanupDispatcher</code>.</li> <li>Fix Compose preview for placeholder set using <code>ImageLoader.Builder.placeholder</code>.</li> <li>Mark <code>LocalImageLoader.current</code> with <code>@ReadOnlyComposable</code> to generate more efficient code.</li> <li>Update Compose to 1.1.0-beta03 and depend on <code>compose.foundation</code> instead of <code>compose.ui</code>.</li> <li>Update <code>androidx.appcompat-resources</code> to 1.4.0.</li> </ul> <h2 id=200-alpha03-november-12-2021>[2.0.0-alpha03] - November 12, 2021<a class=headerlink href=#200-alpha03-november-12-2021 title="Permanent link">&para;</a></h2> <ul> <li>Add ability to load music thumbnails on Android 29+. (<a href=https://github.com/coil-kt/coil/pull/967>#967</a>)</li> <li>Fix: Use <code>context.resources</code> to load resources for current package. (<a href=https://github.com/coil-kt/coil/pull/968>#968</a>)</li> <li>Fix: <code>clear</code> -&gt; <code>dispose</code> replacement expression. (<a href=https://github.com/coil-kt/coil/pull/970>#970</a>)</li> <li>Update Compose to 1.0.5.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.20.2.</li> <li>Update Okio to 3.0.0.</li> <li>Update <code>androidx.annotation</code> to 1.3.0.</li> <li>Update <code>androidx.core</code> to 1.7.0.</li> <li>Update <code>androidx.lifecycle</code> to 2.4.0.<ul> <li>Remove dependency on <code>lifecycle-common-java8</code> as it's been merged into <code>lifecycle-common</code>.</li> </ul> </li> </ul> <h2 id=200-alpha02-october-24-2021>[2.0.0-alpha02] - October 24, 2021<a class=headerlink href=#200-alpha02-october-24-2021 title="Permanent link">&para;</a></h2> <ul> <li>Add a new <code>coil-bom</code> artifact which includes a <a href=https://docs.gradle.org/7.2/userguide/platforms.html#sub:bom_import>bill of materials</a>.<ul> <li>Importing <code>coil-bom</code> allows you to depend on other Coil artifacts without specifying a version.</li> </ul> </li> <li>Fix failing to load an image when using <code>ExecuteCallback.Immediate</code>.</li> <li>Update Okio to 3.0.0-alpha.11.<ul> <li>This also resolves a compatibility issue with Okio 3.0.0-alpha.11.</li> </ul> </li> <li>Update Kotlin to 1.5.31.</li> <li>Update Compose to 1.0.4.</li> </ul> <h2 id=200-alpha01-october-11-2021>[2.0.0-alpha01] - October 11, 2021<a class=headerlink href=#200-alpha01-october-11-2021 title="Permanent link">&para;</a></h2> <p>Coil 2.0.0 is the next major iteration of the library and has new features, performance improvements, API improvements, and various bug fixes. This release may be binary/source incompatible with future alpha releases until the stable release of 2.0.0.</p> <ul> <li><strong>Important</strong>: The minimum supported API is now 21.</li> <li><strong>Important</strong>: Enable <code>-Xjvm-default=all</code>.<ul> <li>This generates Java 8 default methods instead of using Kotlin's default interface method support. Check out <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ >this blog post</a> for more information.</li> <li><strong>You'll need to add <code>-Xjvm-default=all</code> or <code>-Xjvm-default=all-compatibility</code> to your build file as well.</strong> See <a href=https://coil-kt.github.io/coil/faq/#how-do-i-target-java-8>here</a> for how to do this.</li> </ul> </li> <li><strong>Important</strong>: Coil now has its own disk cache implementation and no longer relies on OkHttp for disk caching.<ul> <li>This change was made to:<ul> <li>Better support thread interruption while decoding images. This improves performance when image requests are started and stopped in quick succession.</li> <li>Support exposing <code>ImageSource</code>s backed by <code>File</code>s. This avoids unnecessary copying when an Android API requires a <code>File</code> to decode (e.g. <code>MediaMetadataRetriever</code>).</li> <li>Support reading from/writing to the disk cache files directly.</li> </ul> </li> <li>Use <code>ImageLoader.Builder.diskCache</code> and <code>DiskCache.Builder</code> to configure the disk cache.</li> <li>You <strong>should not</strong> use OkHttp's <code>Cache</code> with Coil 2.0 as it can be corrupted if it's interrupted while writing to it.</li> <li><code>Cache-Control</code> and other cache headers are still supported - except <code>Vary</code> headers, as the cache only checks that the URLs match. Additionally, only responses with a response code in the range [200..300) are cached.</li> <li>Support for cache headers can be enabled or disabled using <code>ImageLoader.Builder.respectCacheHeaders</code>.</li> <li>Your existing disk cache will be cleared and rebuilt when upgrading to 2.0.</li> </ul> </li> <li><strong>Important</strong>: <code>ImageRequest</code>'s default <code>Scale</code> is now <code>Scale.FIT</code><ul> <li>This was changed to make <code>ImageRequest.scale</code> consistent with other classes that have a default <code>Scale</code>.</li> <li>Requests with an <code>ImageViewTarget</code> still have their scale autodetected.</li> </ul> </li> <li>Significant changes to the image pipeline classes:<ul> <li><code>Mapper</code>, <code>Fetcher</code>, and <code>Decoder</code> have been refactored to be more flexible.</li> <li><code>Fetcher.key</code> has been replaced with a new <code>Keyer</code> interface. <code>Keyer</code> creates the cache key from the input data.</li> <li>Adds <code>ImageSource</code>, which allows <code>Decoder</code>s to decode <code>File</code>s directly.</li> </ul> </li> <li><code>BitmapPool</code> and <code>PoolableViewTarget</code> have been removed from the library. Bitmap pooling was removed because:<ul> <li>It's most effective on &lt;= API 23 and has become less effective with newer Android releases.</li> <li>Removing bitmap pooling allows Coil to use immutable bitmaps, which have performance benefits.</li> <li>There's runtime overhead to manage the bitmap pool.</li> <li>Bitmap pooling creates design restrictions on Coil's API as it requires tracking if a bitmap is eligible for pooling. Removing bitmap pooling allows Coil to expose the result <code>Drawable</code> in more places (e.g. <code>Listener</code>, <code>Disposable</code>). Additionally, this means Coil doesn't have to clear <code>ImageView</code>s, which has can cause <a href=https://github.com/coil-kt/coil/issues/650>issues</a>.</li> <li>Bitmap pooling is <a href=https://github.com/coil-kt/coil/issues/546>error-prone</a>. Allocating a new bitmap is much safer than attempting to re-use a bitmap that could still be in use.</li> </ul> </li> <li><code>MemoryCache</code> has been refactored to be more flexible.</li> <li>Disable generating runtime not-null assertions.<ul> <li>If you use Java, passing null as a not-null annotated parameter to a function will no longer throw a <code>NullPointerException</code> immediately. If you use Kotlin, there is essentially no change.</li> <li>This change allows the library's size to be smaller.</li> </ul> </li> <li><code>VideoFrameFileFetcher</code> and <code>VideoFrameUriFetcher</code> are removed from the library. Use <code>VideoFrameDecoder</code> instead, which supports all data sources.</li> <li>Adds support for <code>bitmapFactoryMaxParallelism</code>, which restricts the maximum number of in-progress <code>BitmapFactory</code> operations. This value is 4 by default, which improves UI performance.</li> <li>Adds support for <code>interceptorDispatcher</code>, <code>fetcherDispatcher</code>, <code>decoderDispatcher</code>, and <code>transformationDispatcher</code>.</li> <li><code>Disposable</code> has been refactored and exposes the underlying <code>ImageRequest</code>'s job.</li> <li>Change <code>Transition.transition</code> to be a non-suspending function as it's no longer needed to suspend the transition until it completes.</li> <li>Add <code>GenericViewTarget</code>, which handles common <code>ViewTarget</code> logic.</li> <li><a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/BlurTransformation.kt><code>BlurTransformation</code></a> and <a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-core/src/main/java/coil/transform/GrayscaleTransformation.kt><code>GrayscaleTransformation</code></a> are removed from the library.<ul> <li>If you use them, you can copy their code into your project.</li> </ul> </li> <li><code>ImageRequest.error</code> is now set on the <code>Target</code> if <code>ImageRequest.fallback</code> is null.</li> <li><code>Transformation.key</code> is replaced with <code>Transformation.cacheKey</code>.</li> <li><code>ImageRequest.Listener</code> returns <code>SuccessResult</code>/<code>ErrorResult</code> in <code>onSuccess</code> and <code>onError</code> respectively.</li> <li>Add <code>ByteBuffer</code>s to the default supported data types.</li> <li>Remove <code>toString</code> implementations from several classes.</li> <li>Update OkHttp to 4.9.2.</li> <li>Update Okio to 3.0.0-alpha.10.</li> </ul> <h2 id=140-october-6-2021>[1.4.0] - October 6, 2021<a class=headerlink href=#140-october-6-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>ImageResult</code> to <code>ImagePainter.State.Success</code> and <code>ImagePainter.State.Error</code>. (<a href=https://github.com/coil-kt/coil/pull/887>#887</a>)<ul> <li>This is a binary incompatible change to the signatures of <code>ImagePainter.State.Success</code> and <code>ImagePainter.State.Error</code>, however these APIs are marked as experimental.</li> </ul> </li> <li>Only execute <code>CrossfadeTransition</code> if <code>View.isShown</code> is <code>true</code>. Previously it would only check <code>View.isVisible</code>. (<a href=https://github.com/coil-kt/coil/pull/898>#898</a>)</li> <li>Fix potential memory cache miss if scaling multiplier is slightly less than 1 due to a rounding issue. (<a href=https://github.com/coil-kt/coil/pull/899>#899</a>)</li> <li>Make non-inlined <code>ComponentRegistry</code> methods public. (<a href=https://github.com/coil-kt/coil/pull/925>#925</a>)</li> <li>Depend on <code>accompanist-drawablepainter</code> and remove Coil's custom <code>DrawablePainter</code> implementation. (<a href=https://github.com/coil-kt/coil/pull/845>#845</a>)</li> <li>Remove use of a Java 8 method to guard against desugaring issue. (<a href=https://github.com/coil-kt/coil/pull/924>#924</a>)</li> <li>Promote <code>ImagePainter.ExecuteCallback</code> to stable API. (<a href=https://github.com/coil-kt/coil/pull/927>#927</a>)</li> <li>Update compileSdk to 31.</li> <li>Update Kotlin to 1.5.30.</li> <li>Update Coroutines to 1.5.2.</li> <li>Update Compose to 1.0.3.</li> </ul> <h2 id=132-august-4-2021>[1.3.2] - August 4, 2021<a class=headerlink href=#132-august-4-2021 title="Permanent link">&para;</a></h2> <ul> <li><code>coil-compose</code> now depends on <code>compose.ui</code> instead of <code>compose.foundation</code>.<ul> <li><code>compose.ui</code> is a smaller dependency as it's a subset of <code>compose.foundation</code>.</li> </ul> </li> <li>Update Jetpack Compose to 1.0.1.</li> <li>Update Kotlin to 1.5.21.</li> <li>Update Coroutines to 1.5.1.</li> <li>Update <code>androidx.exifinterface:exifinterface</code> to 1.3.3.</li> </ul> <h2 id=131-july-28-2021>[1.3.1] - July 28, 2021<a class=headerlink href=#131-july-28-2021 title="Permanent link">&para;</a></h2> <ul> <li>Update Jetpack Compose to <code>1.0.0</code>. Huge congrats to the Compose team on the <a href=https://android-developers.googleblog.com/2021/07/jetpack-compose-announcement.html>stable release</a>!</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.3.1.</li> </ul> <h2 id=130-july-10-2021>[1.3.0] - July 10, 2021<a class=headerlink href=#130-july-10-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add support for <a href=https://developer.android.com/jetpack/compose>Jetpack Compose</a>. It's based on <a href=https://github.com/google/accompanist/ >Accompanist</a>'s Coil integration, but has a number of changes. Check out <a href=https://coil-kt.github.io/coil/compose/ >the docs</a> for more info.</li> <li>Add <code>allowConversionToBitmap</code> to enable/disable the automatic bitmap conversion for <code>Transformation</code>s. (<a href=https://github.com/coil-kt/coil/pull/775>#775</a>)</li> <li>Add <code>enforceMinimumFrameDelay</code> to <code>ImageDecoderDecoder</code> and <code>GifDecoder</code> to enable rewriting a GIF's frame delay if it's below a threshold. (<a href=https://github.com/coil-kt/coil/pull/783>#783</a>)<ul> <li>This is disabled by default, but will be enabled by default in a future release.</li> </ul> </li> <li>Add support for enabling/disabling an <code>ImageLoader</code>'s internal network observer. (<a href=https://github.com/coil-kt/coil/pull/741>#741</a>)</li> <li>Fix the density of bitmaps decoded by <code>BitmapFactoryDecoder</code>. (<a href=https://github.com/coil-kt/coil/pull/776>#776</a>)</li> <li>Fix Licensee not finding Coil's licence url. (<a href=https://github.com/coil-kt/coil/pull/774>#774</a>)</li> <li>Update <code>androidx.core:core-ktx</code> to 1.6.0.</li> </ul> <h2 id=122-june-4-2021>[1.2.2] - June 4, 2021<a class=headerlink href=#122-june-4-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix race condition while converting a drawable with shared state to a bitmap. (<a href=https://github.com/coil-kt/coil/pull/771>#771</a>)</li> <li>Fix <code>ImageLoader.Builder.fallback</code> setting the <code>error</code> drawable instead of the <code>fallback</code> drawable.</li> <li>Fix incorrect data source returned by <code>ResourceUriFetcher</code>. (<a href=https://github.com/coil-kt/coil/pull/770>#770</a>)</li> <li>Fix log check for no available file descriptors on API 26 and 27.</li> <li>Fix incorrect version check for platform vector drawable support. (<a href=https://github.com/coil-kt/coil/pull/751>#751</a>)</li> <li>Update Kotlin (1.5.10).</li> <li>Update Coroutines (1.5.0).</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.3.0.</li> <li>Update <code>androidx.core:core-ktx</code> to 1.5.0.</li> </ul> <h2 id=121-april-27-2021>[1.2.1] - April 27, 2021<a class=headerlink href=#121-april-27-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix <code>VideoFrameUriFetcher</code> attempting to handle http/https URIs. (<a href=https://github.com/coil-kt/coil/pull/734>#734</a></li> </ul> <h2 id=120-april-12-2021>[1.2.0] - April 12, 2021<a class=headerlink href=#120-april-12-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Use an SVG's view bounds to calculate its aspect ratio in <code>SvgDecoder</code>. (<a href=https://github.com/coil-kt/coil/pull/688>#688</a>)<ul> <li>Previously, <code>SvgDecoder</code> used an SVG's <code>width</code>/<code>height</code> elements to determine its aspect ratio, however this doesn't correctly follow the SVG specification.</li> <li>To revert to the old behaviour set <code>useViewBoundsAsIntrinsicSize = false</code> when constructing your <code>SvgDecoder</code>.</li> </ul> </li> <li><strong>New</strong>: Add <code>VideoFrameDecoder</code> to support decoding video frames from any source. (<a href=https://github.com/coil-kt/coil/pull/689>#689</a>)</li> <li><strong>New</strong>: Support automatic SVG detection using the source's contents instead of just the MIME type. (<a href=https://github.com/coil-kt/coil/pull/654>#654</a>)</li> <li><strong>New</strong>: Support sharing resources using <code>ImageLoader.newBuilder()</code>. (<a href=https://github.com/coil-kt/coil/pull/653>#653</a>)<ul> <li>Importantly, this enables sharing memory caches between <code>ImageLoader</code> instances.</li> </ul> </li> <li><strong>New</strong>: Add support for animated image transformations using <code>AnimatedTransformation</code>. (<a href=https://github.com/coil-kt/coil/pull/659>#659</a>)</li> <li><strong>New</strong>: Add support for start/end callbacks for animated drawables. (<a href=https://github.com/coil-kt/coil/pull/676>#676</a>)</li> </ul> <hr> <ul> <li>Fix parsing EXIF data for HEIF/HEIC files. (<a href=https://github.com/coil-kt/coil/pull/664>#664</a>)</li> <li>Fix not using the <code>EmptyBitmapPool</code> implementation if bitmap pooling is disabled. (<a href=https://github.com/coil-kt/coil/pull/638>#638</a>)<ul> <li>Without this fix bitmap pooling was still disabled properly, however it used a more heavyweight <code>BitmapPool</code> implementation.</li> </ul> </li> <li>Fix case where <code>MovieDrawable.getOpacity</code> would incorrectly return transparent. (<a href=https://github.com/coil-kt/coil/pull/682>#682</a>)</li> <li>Guard against the default temporary directory not existing. (<a href=https://github.com/coil-kt/coil/pull/683>#683</a>)</li> </ul> <hr> <ul> <li>Build using the JVM IR backend. (<a href=https://github.com/coil-kt/coil/pull/670>#670</a>)</li> <li>Update Kotlin (1.4.32).</li> <li>Update Coroutines (1.4.3).</li> <li>Update OkHttp (3.12.13).</li> <li>Update <code>androidx.lifecycle:lifecycle-common-java8</code> to 2.3.1.</li> </ul> <h2 id=111-january-11-2021>[1.1.1] - January 11, 2021<a class=headerlink href=#111-january-11-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix a case where <code>ViewSizeResolver.size</code> could throw an <code>IllegalStateException</code> due to resuming a coroutine more than once.</li> <li>Fix <code>HttpFetcher</code> blocking forever if called from the main thread.<ul> <li>Requests that are forced to execute on the main thread using <code>ImageRequest.dispatcher(Dispatchers.Main.immediate)</code> will fail with a <code>NetworkOnMainThreadException</code> unless <code>ImageRequest.networkCachePolicy</code> is set to <code>CachePolicy.DISABLED</code> or <code>CachePolicy.WRITE_ONLY</code>.</li> </ul> </li> <li>Rotate video frames from <code>VideoFrameFetcher</code> if the video has rotation metadata.</li> <li>Update Kotlin (1.4.21).</li> <li>Update Coroutines (1.4.2).</li> <li>Update Okio (2.10.0).</li> <li>Update <code>androidx.exifinterface:exifinterface</code> (1.3.2).</li> </ul> <h2 id=110-november-24-2020>[1.1.0] - November 24, 2020<a class=headerlink href=#110-november-24-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Change the <code>CENTER</code> and <code>MATRIX</code> <code>ImageView</code> scale types to resolve to <code>OriginalSize</code>. (<a href=https://github.com/coil-kt/coil/pull/587>#587</a>)<ul> <li>This change only affects the implicit size resolution algorithm when the request's size isn't specified explicitly.</li> <li>This change was made to ensure that the visual result of an image request is consistent with <code>ImageView.setImageResource</code>/<code>ImageView.setImageURI</code>. To revert to the old behaviour set a <code>ViewSizeResolver</code> when constructing your request.</li> </ul> </li> <li><strong>Important</strong>: Return the display size from <code>ViewSizeResolver</code> if the view's layout param is <code>WRAP_CONTENT</code>. (<a href=https://github.com/coil-kt/coil/pull/562>#562</a>)<ul> <li>Previously, we would only return the display size if the view has been fully laid out. This change makes the typical behaviour more consistent and intuitive.</li> </ul> </li> <li>Add the ability to control alpha pre-multiplication. (<a href=https://github.com/coil-kt/coil/pull/569>#569</a>)</li> <li>Support preferring exact intrinsic size in <code>CrossfadeDrawable</code>. (<a href=https://github.com/coil-kt/coil/pull/585>#585</a>)</li> <li>Check for the full GIF header including version. (<a href=https://github.com/coil-kt/coil/pull/564>#564</a>)</li> <li>Add an empty bitmap pool implementation. (<a href=https://github.com/coil-kt/coil/pull/561>#561</a>)</li> <li>Make <code>EventListener.Factory</code> a functional interface. (<a href=https://github.com/coil-kt/coil/pull/575>#575</a>)</li> <li>Stabilize <code>EventListener</code>. (<a href=https://github.com/coil-kt/coil/pull/574>#574</a>)</li> <li>Add <code>String</code> overload for <code>ImageRequest.Builder.placeholderMemoryCacheKey</code>.</li> <li>Add <code>@JvmOverloads</code> to the <code>ViewSizeResolver</code> constructor.</li> <li>Fix: Mutate start/end drawables in <code>CrossfadeDrawable</code>. (<a href=https://github.com/coil-kt/coil/pull/572>#572</a>)</li> <li>Fix: Fix GIF not playing on second load. (<a href=https://github.com/coil-kt/coil/pull/534>#577</a>)</li> <li>Update Kotlin (1.4.20) and migrate to the <code>kotlin-parcelize</code> plugin.</li> <li>Update Coroutines (1.4.1).</li> </ul> <h2 id=100-october-22-2020>[1.0.0] - October 22, 2020<a class=headerlink href=#100-october-22-2020 title="Permanent link">&para;</a></h2> <p>Changes since <code>0.13.0</code>: - Add <code>Context.imageLoader</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/534>#534</a>) - Add <code>ImageLoader.executeBlocking</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/537>#537</a>) - Don't shutdown previous singleton image loader if replaced. (<a href=https://github.com/coil-kt/coil/pull/533>#533</a>)</p> <p>Changes since <code>1.0.0-rc3</code>: - Fix: Guard against missing/invalid ActivityManager. (<a href=https://github.com/coil-kt/coil/pull/541>#541</a>) - Fix: Allow OkHttp to cache unsuccessful responses. (<a href=https://github.com/coil-kt/coil/pull/551>#551</a>) - Update Kotlin to 1.4.10. - Update Okio to 2.9.0. - Update <code>androidx.exifinterface:exifinterface</code> to 1.3.1.</p> <h2 id=100-rc3-september-21-2020>[1.0.0-rc3] - September 21, 2020<a class=headerlink href=#100-rc3-september-21-2020 title="Permanent link">&para;</a></h2> <ul> <li>Revert using the <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ ><code>-Xjvm-default=all</code></a> compiler flag due to instability.<ul> <li><strong>This is a source compatible, but binary incompatible change from previous release candidate versions.</strong></li> </ul> </li> <li>Add <code>Context.imageLoader</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/534>#534</a>)</li> <li>Add <code>ImageLoader.executeBlocking</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/537>#537</a>)</li> <li>Don't shutdown previous singleton image loader if replaced. (<a href=https://github.com/coil-kt/coil/pull/533>#533</a>)</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.3.0</li> </ul> </li> </ul> <h2 id=100-rc2-september-3-2020>[1.0.0-rc2] - September 3, 2020<a class=headerlink href=#100-rc2-september-3-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>This release requires Kotlin 1.4.0 or above.</strong></li> <li>All the changes present in <a href=#0130---september-3-2020>0.13.0</a>.</li> <li>Depend on the base Kotlin <code>stdlib</code> instead of <code>stdlib-jdk8</code>.</li> </ul> <h2 id=0130-september-3-2020>[0.13.0] - September 3, 2020<a class=headerlink href=#0130-september-3-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Launch the Interceptor chain on the main thread by default. (<a href=https://github.com/coil-kt/coil/pull/513>#513</a>)<ul> <li>This largely restores the behaviour from <code>0.11.0</code> and below where the memory cache would be checked synchronously on the main thread.</li> <li>To revert to using the same behaviour as <code>0.12.0</code> where the memory cache is checked on <code>ImageRequest.dispatcher</code>, set <code>ImageLoader.Builder.launchInterceptorChainOnMainThread(false)</code>.</li> <li>See <a href=https://coil-kt.github.io/coil/api/coil-core/coil3/-image-loader/-builder/launch-interceptor-chain-on-main-thread/ ><code>launchInterceptorChainOnMainThread</code></a> for more information.</li> </ul> </li> </ul> <hr> <ul> <li>Fix: Fix potential memory leak if request is started on a <code>ViewTarget</code> in a detached fragment. (<a href=https://github.com/coil-kt/coil/pull/518>#518</a>)</li> <li>Fix: Use <code>ImageRequest.context</code> to load resource URIs. (<a href=https://github.com/coil-kt/coil/pull/517>#517</a>)</li> <li>Fix: Fix race condition that could cause subsequent requests to not be saved to the disk cache. (<a href=https://github.com/coil-kt/coil/pull/510>#510</a>)</li> <li>Fix: Use <code>blockCountLong</code> and <code>blockSizeLong</code> on API 18.</li> </ul> <hr> <ul> <li>Make <code>ImageLoaderFactory</code> a fun interface.</li> <li>Add <code>ImageLoader.Builder.addLastModifiedToFileCacheKey</code> which allows you to enable/disable adding the last modified timestamp to the memory cache key for an image loaded from a <code>File</code>.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.4.0.</li> <li>Update Coroutines to 1.3.9.</li> <li>Update Okio to 2.8.0.</li> </ul> <h2 id=100-rc1-august-18-2020>[1.0.0-rc1] - August 18, 2020<a class=headerlink href=#100-rc1-august-18-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>This release requires Kotlin 1.4.0 or above.</strong></li> <li>Update Kotlin to 1.4.0 and enable <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ ><code>-Xjvm-default=all</code></a>.<ul> <li><strong><a href=https://coil-kt.github.io/coil/faq/#how-do-i-target-java-8>See here</a> for how to enable <code>-Xjvm-default=all</code> in your build file.</strong></li> <li>This generates Java 8 default methods for default Kotlin interface methods.</li> </ul> </li> <li>Remove all existing deprecated methods in 0.12.0.</li> <li>Update Coroutines to 1.3.9.</li> </ul> <h2 id=0120-august-18-2020>[0.12.0] - August 18, 2020<a class=headerlink href=#0120-august-18-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>LoadRequest</code> and <code>GetRequest</code> have been replaced with <code>ImageRequest</code>:<ul> <li><code>ImageLoader.execute(LoadRequest)</code> -&gt; <code>ImageLoader.enqueue(ImageRequest)</code></li> <li><code>ImageLoader.execute(GetRequest)</code> -&gt; <code>ImageLoader.execute(ImageRequest)</code></li> <li><code>ImageRequest</code> implements <code>equals</code>/<code>hashCode</code>.</li> </ul> </li> <li><strong>Breaking</strong>: A number of classes were renamed and/or changed package:<ul> <li><code>coil.request.RequestResult</code> -&gt; <code>coil.request.ImageResult</code></li> <li><code>coil.request.RequestDisposable</code> -&gt; <code>coil.request.Disposable</code></li> <li><code>coil.bitmappool.BitmapPool</code> -&gt; <code>coil.bitmap.BitmapPool</code></li> <li><code>coil.DefaultRequestOptions</code> -&gt; <code>coil.request.DefaultRequestOptions</code></li> </ul> </li> <li><strong>Breaking</strong>: <a href=https://github.com/coil-kt/coil/blob/f52addd039f0195b66f93cb0f1cad59b0832f784/coil-core/src/main/java/coil/collection/SparseIntArraySet.kt><code>SparseIntArraySet</code></a> has been removed from the public API.</li> <li><strong>Breaking</strong>: <code>TransitionTarget</code> no longer implements <code>ViewTarget</code>.</li> <li><strong>Breaking</strong>: <code>ImageRequest.Listener.onSuccess</code>'s signature has changed to return an <code>ImageResult.Metadata</code> instead of just a <code>DataSource</code>.</li> <li><strong>Breaking</strong>: Remove support for <code>LoadRequest.aliasKeys</code>. This API is better handled with direct read/write access to the memory cache.</li> </ul> <hr> <ul> <li><strong>Important</strong>: Values in the memory cache are no longer resolved synchronously (if called from the main thread).<ul> <li>This change was also necessary to support executing <code>Interceptor</code>s on a background dispatcher.</li> <li>This change also moves more work off the main thread, improving performance.</li> </ul> </li> <li><strong>Important</strong>: <code>Mappers</code> are now executed on a background dispatcher. As a side effect, automatic bitmap sampling is no longer <strong>automatically</strong> supported. To achieve the same effect, use the <code>MemoryCache.Key</code> of a previous request as the <code>placeholderMemoryCacheKey</code> of the subsequent request. <a href=https://coil-kt.github.io/coil/recipes/#using-a-memory-cache-key-as-a-placeholder>See here for an example</a>.<ul> <li>The <code>placeholderMemoryCacheKey</code> API offers more freedom as you can "link" two image requests with different data (e.g. different URLs for small/large images).</li> </ul> </li> <li><strong>Important</strong>: Coil's <code>ImageView</code> extension functions have been moved from the <code>coil.api</code> package to the <code>coil</code> package.<ul> <li>Use find + replace to refactor <code>import coil.api.load</code> -&gt; <code>import coil.load</code>. Unfortunately, it's not possible to use Kotlin's <code>ReplaceWith</code> functionality to replace imports.</li> </ul> </li> <li><strong>Important</strong>: Use standard crossfade if drawables are not the same image.</li> <li><strong>Important</strong>: Prefer immutable bitmaps on API 24+.</li> <li><strong>Important</strong>: <code>MeasuredMapper</code> has been deprecated in favour of the new <code>Interceptor</code> interface. See <a href=https://gist.github.com/colinrtwhite/90267704091467451e46b21b95154299>here</a> for an example of how to convert a <code>MeasuredMapper</code> into an <code>Interceptor</code>.<ul> <li><code>Interceptor</code> is a much less restrictive API that allows for a wider range of custom logic.</li> </ul> </li> <li><strong>Important</strong>: <code>ImageRequest.data</code> is now not null. If you create an <code>ImageRequest</code> without setting its data it will return <code>NullRequestData</code> as its data.</li> </ul> <hr> <ul> <li><strong>New</strong>: Add support for direct read/write access to an <code>ImageLoader</code>'s <code>MemoryCache</code>. See <a href=https://coil-kt.github.io/coil/getting_started/#memory-cache>the docs</a> for more information.</li> <li><strong>New</strong>: Add support for <code>Interceptor</code>s. See <a href=https://coil-kt.github.io/coil/image_pipeline/#interceptors>the docs</a> for more information. Coil's <code>Interceptor</code> design is heavily inspired by <a href=https://github.com/square/okhttp>OkHttp</a>'s!</li> <li><strong>New</strong>: Add the ability to enable/disable bitmap pooling using <code>ImageLoader.Builder.bitmapPoolingEnabled</code>.<ul> <li>Bitmap pooling is most effective on API 23 and below, but may still be benificial on API 24 and up (by eagerly calling <code>Bitmap.recycle</code>).</li> </ul> </li> <li><strong>New</strong>: Support thread interruption while decoding.</li> </ul> <hr> <ul> <li>Fix parsing multiple segments in content-type header.</li> <li>Rework bitmap reference counting to be more robust.</li> <li>Fix WebP decoding on API &lt; 19 devices.</li> <li>Expose FetchResult and DecodeResult in the EventListener API.</li> </ul> <hr> <ul> <li>Compile with SDK 30.</li> <li>Update Coroutines to 1.3.8.</li> <li>Update OkHttp to 3.12.12.</li> <li>Update Okio to 2.7.0.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.appcompat:appcompat-resources</code> -&gt; 1.2.0</li> <li><code>androidx.core:core-ktx</code> -&gt; 1.3.1</li> </ul> </li> </ul> <h2 id=0110-may-14-2020>[0.11.0] - May 14, 2020<a class=headerlink href=#0110-may-14-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <strong>This version removes all existing deprecated functions.</strong><ul> <li>This enables removing Coil's <code>ContentProvider</code> so it doesn't run any code at app startup.</li> </ul> </li> <li><strong>Breaking</strong>: Convert <code>SparseIntArraySet.size</code> to a val. (<a href=https://github.com/coil-kt/coil/pull/380>#380</a>)</li> <li><strong>Breaking</strong>: Move <code>Parameters.count()</code> to an extension function. (<a href=https://github.com/coil-kt/coil/pull/403>#403</a>)</li> <li><strong>Breaking</strong>: Make <code>BitmapPool.maxSize</code> an Int. (<a href=https://github.com/coil-kt/coil/pull/404>#404</a>)</li> </ul> <hr> <ul> <li><strong>Important</strong>: Make <code>ImageLoader.shutdown()</code> optional (similar to <code>OkHttpClient</code>). (<a href=https://github.com/coil-kt/coil/pull/385>#385</a>)</li> </ul> <hr> <ul> <li>Fix: Fix AGP 4.1 compatibility. (<a href=https://github.com/coil-kt/coil/pull/386>#386</a>)</li> <li>Fix: Fix measuring GONE views. (<a href=https://github.com/coil-kt/coil/pull/397>#397</a>)</li> </ul> <hr> <ul> <li>Reduce the default memory cache size to 20%. (<a href=https://github.com/coil-kt/coil/pull/390>#390</a>)<ul> <li>To restore the existing behaviour set <code>ImageLoaderBuilder.availableMemoryPercentage(0.25)</code> when creating your <code>ImageLoader</code>.</li> </ul> </li> <li>Update Coroutines to 1.3.6.</li> <li>Update OkHttp to 3.12.11.</li> </ul> <h2 id=0101-april-26-2020>[0.10.1] - April 26, 2020<a class=headerlink href=#0101-april-26-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix OOM when decoding large PNGs on API 23 and below. (<a href=https://github.com/coil-kt/coil/pull/372>#372</a>).<ul> <li>This disables decoding EXIF orientation for PNG files. PNG EXIF orientation is very rarely used and reading PNG EXIF data (even if it's empty) requires buffering the entire file into memory, which is bad for performance.</li> </ul> </li> <li>Minor Java compatibility improvements to <code>SparseIntArraySet</code>.</li> </ul> <hr> <ul> <li>Update Okio to 2.6.0.</li> </ul> <h2 id=0100-april-20-2020>[0.10.0] - April 20, 2020<a class=headerlink href=#0100-april-20-2020 title="Permanent link">&para;</a></h2> <h3 id=highlights>Highlights<a class=headerlink href=#highlights title="Permanent link">&para;</a></h3> <ul> <li> <p><strong>This version deprecates most of the DSL API in favour of using the builders directly.</strong> Here's what the change looks like:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>// 0.9.5 (old)</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kd>val</span><span class=w> </span><span class=nv>imageLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageLoader</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=n>bitmapPoolPercentage</span><span class=p>(</span><span class=m>0.5</span><span class=p>)</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=n>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=p>}</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=kd>val</span><span class=w> </span><span class=nv>disposable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>imageLoader</span><span class=p>.</span><span class=na>load</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=n>target</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=p>}</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=kd>val</span><span class=w> </span><span class=nv>drawable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>imageLoader</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>    </span><span class=n>size</span><span class=p>(</span><span class=m>512</span><span class=p>,</span><span class=w> </span><span class=m>512</span><span class=p>)</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=p>}</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=c1>// 0.10.0 (new)</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=kd>val</span><span class=w> </span><span class=nv>imageLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageLoader</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>    </span><span class=p>.</span><span class=na>bitmapPoolPercentage</span><span class=p>(</span><span class=m>0.5</span><span class=p>)</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=kd>val</span><span class=w> </span><span class=nv>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoadRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>    </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>    </span><span class=p>.</span><span class=na>target</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=kd>val</span><span class=w> </span><span class=nv>disposable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>imageLoader</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=kd>val</span><span class=w> </span><span class=nv>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GetRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=w>    </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=m>512</span><span class=p>,</span><span class=w> </span><span class=m>512</span><span class=p>)</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=kd>val</span><span class=w> </span><span class=nv>drawable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>imageLoader</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>request</span><span class=p>).</span><span class=na>drawable</span>
</code></pre></div> <ul> <li>If you're using the <code>io.coil-kt:coil</code> artifact, you can call <code>Coil.execute(request)</code> to execute the request with the singleton <code>ImageLoader</code>.</li> </ul> </li> <li> <p><strong><code>ImageLoader</code>s now have a weak reference memory cache</strong> that tracks weak references to images once they're evicted from the strong reference memory cache.</p> <ul> <li>This means an image will always be returned from an <code>ImageLoader</code>'s memory cache if there's still a strong reference to it.</li> <li>Generally, this should make the memory cache much more predictable and increase its hit rate.</li> <li>This behaviour can be enabled/disabled with <code>ImageLoaderBuilder.trackWeakReferences</code>.</li> </ul> </li> <li> <p>Add a new artifact, <strong><code>io.coil-kt:coil-video</code></strong>, to decode specific frames from a video file. <a href=https://coil-kt.github.io/coil/videos/ >Read more here</a>.</p> </li> <li> <p>Add a new <a href=https://github.com/coil-kt/coil/blob/main/coil-core/src/main/java/coil/EventListener.kt>EventListener</a> API for tracking metrics.</p> </li> <li> <p>Add <a href=https://github.com/coil-kt/coil/blob/main/coil/src/main/java/coil/ImageLoaderFactory.kt>ImageLoaderFactory</a> which can be implemented by your <code>Application</code> to simplify singleton initialization.</p> </li> </ul> <hr> <h3 id=full-release-notes>Full Release Notes<a class=headerlink href=#full-release-notes title="Permanent link">&para;</a></h3> <ul> <li><strong>Important</strong>: Deprecate DSL syntax in favour of builder syntax. (<a href=https://github.com/coil-kt/coil/pull/267>#267</a>)</li> <li><strong>Important</strong>: Deprecate <code>Coil</code> and <code>ImageLoader</code> extension functions. (<a href=https://github.com/coil-kt/coil/pull/322>#322</a>)</li> <li><strong>Breaking</strong>: Return sealed <code>RequestResult</code> type from <code>ImageLoader.execute(GetRequest)</code>. (<a href=https://github.com/coil-kt/coil/pull/349>#349</a>)</li> <li><strong>Breaking</strong>: Rename <code>ExperimentalCoil</code> to <code>ExperimentalCoilApi</code>. Migrate from <code>@Experimental</code> to <code>@RequiresOptIn</code>. (<a href=https://github.com/coil-kt/coil/pull/306>#306</a>)</li> <li><strong>Breaking</strong>: Replace <code>CoilLogger</code> with <code>Logger</code> interface. (<a href=https://github.com/coil-kt/coil/pull/316>#316</a>)</li> <li><strong>Breaking</strong>: Rename destWidth/destHeight to dstWidth/dstHeight. (<a href=https://github.com/coil-kt/coil/pull/275>#275</a>)</li> <li><strong>Breaking</strong>: Re-arrange <code>MovieDrawable</code>'s constructor params. (<a href=https://github.com/coil-kt/coil/pull/272>#272</a>)</li> <li><strong>Breaking</strong>: <code>Request.Listener</code>'s methods now receive the full <code>Request</code> object instead of just its data.</li> <li><strong>Breaking</strong>: <code>GetRequestBuilder</code> now requires a <code>Context</code> in its constructor.</li> <li><strong>Breaking</strong>: Several properties on <code>Request</code> are now nullable.</li> <li><strong>Behaviour change</strong>: Include parameter values in the cache key by default. (<a href=https://github.com/coil-kt/coil/pull/319>#319</a>)</li> <li><strong>Behaviour change</strong>: Slightly adjust <code>Request.Listener.onStart()</code> timing to be called immediately after <code>Target.onStart()</code>. (<a href=https://github.com/coil-kt/coil/pull/348>#348</a>)</li> </ul> <hr> <ul> <li><strong>New</strong>: Add <code>WeakMemoryCache</code> implementation. (<a href=https://github.com/coil-kt/coil/pull/295>#295</a>)</li> <li><strong>New</strong>: Add <code>coil-video</code> to support decoding video frames. (<a href=https://github.com/coil-kt/coil/pull/122>#122</a>)</li> <li><strong>New</strong>: Introduce <a href=https://github.com/coil-kt/coil/blob/main/coil-core/src/main/java/coil/EventListener.kt><code>EventListener</code></a>. (<a href=https://github.com/coil-kt/coil/pull/314>#314</a>)</li> <li><strong>New</strong>: Introduce <a href=https://github.com/coil-kt/coil/blob/main/coil/src/main/java/coil/ImageLoaderFactory.kt><code>ImageLoaderFactory</code></a>. (<a href=https://github.com/coil-kt/coil/pull/311>#311</a>)</li> <li><strong>New</strong>: Support animated HEIF image sequences on Android 11. (<a href=https://github.com/coil-kt/coil/pull/297>#297</a>)</li> <li><strong>New</strong>: Improve Java compatibility. (<a href=https://github.com/coil-kt/coil/pull/262>#262</a>)</li> <li><strong>New</strong>: Support setting a default <code>CachePolicy</code>. (<a href=https://github.com/coil-kt/coil/pull/307>#307</a>)</li> <li><strong>New</strong>: Support setting a default <code>Bitmap.Config</code>. (<a href=https://github.com/coil-kt/coil/pull/342>#342</a>)</li> <li><strong>New</strong>: Add <code>ImageLoader.invalidate(key)</code> to clear a single memory cache item (<a href=https://github.com/coil-kt/coil/pull/55>#55</a>)</li> <li><strong>New</strong>: Add debug logs to explain why a cached image is not reused. (<a href=https://github.com/coil-kt/coil/pull/346>#346</a>)</li> <li><strong>New</strong>: Support <code>error</code> and <code>fallback</code> drawables for get requests.</li> </ul> <hr> <ul> <li>Fix: Fix memory cache miss when Transformation reduces input bitmap's size. (<a href=https://github.com/coil-kt/coil/pull/357>#357</a>)</li> <li>Fix: Ensure radius is below RenderScript max in BlurTransformation. (<a href=https://github.com/coil-kt/coil/pull/291>#291</a>)</li> <li>Fix: Fix decoding high colour depth images. (<a href=https://github.com/coil-kt/coil/pull/358>#358</a>)</li> <li>Fix: Disable <code>ImageDecoderDecoder</code> crash work-around on Android 11 and above. (<a href=https://github.com/coil-kt/coil/pull/298>#298</a>)</li> <li>Fix: Fix failing to read EXIF data on pre-API 23. (<a href=https://github.com/coil-kt/coil/pull/331>#331</a>)</li> <li>Fix: Fix incompatibility with Android R SDK. (<a href=https://github.com/coil-kt/coil/pull/337>#337</a>)</li> <li>Fix: Only enable inexact size if <code>ImageView</code> has a matching <code>SizeResolver</code>. (<a href=https://github.com/coil-kt/coil/pull/344>#344</a>)</li> <li>Fix: Allow cached images to be at most one pixel off requested size. (<a href=https://github.com/coil-kt/coil/pull/360>#360</a>)</li> <li>Fix: Skip crossfade transition if view is not visible. (<a href=https://github.com/coil-kt/coil/pull/361>#361</a>)</li> </ul> <hr> <ul> <li>Deprecate <code>CoilContentProvider</code>. (<a href=https://github.com/coil-kt/coil/pull/293>#293</a>)</li> <li>Annotate several <code>ImageLoader</code> methods with <code>@MainThread</code>.</li> <li>Avoid creating a <code>LifecycleCoroutineDispatcher</code> if the lifecycle is currently started. (<a href=https://github.com/coil-kt/coil/pull/356>#356</a>)</li> <li>Use full package name for <code>OriginalSize.toString()</code>.</li> <li>Preallocate when decoding software bitmap. (<a href=https://github.com/coil-kt/coil/pull/354>#354</a>)</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.72.</li> <li>Update Coroutines to 1.3.5.</li> <li>Update OkHttp to 3.12.10.</li> <li>Update Okio to 2.5.0.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.2.0</li> </ul> </li> </ul> <h2 id=095-february-6-2020>[0.9.5] - February 6, 2020<a class=headerlink href=#095-february-6-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Ensure a view is attached before checking if it is hardware accelerated. This fixes a case where requesting a hardware bitmap could miss the memory cache.</li> </ul> <hr> <ul> <li>Update AndroidX dependencies:<ul> <li><code>androidx.core:core-ktx</code> -&gt; 1.2.0</li> </ul> </li> </ul> <h2 id=094-february-3-2020>[0.9.4] - February 3, 2020<a class=headerlink href=#094-february-3-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Respect aspect ratio when downsampling in ImageDecoderDecoder. Thanks @zhanghai.</li> </ul> <hr> <ul> <li>Previously bitmaps would be returned from the memory cache as long as their config was greater than or equal to the config specified in the request. For example, if you requested an <code>ARGB_8888</code> bitmap, it would be possible to have a <code>RGBA_F16</code> bitmap returned to you from the memory cache. Now, the cached config and the requested config must be equal.</li> <li>Make <code>scale</code> and <code>durationMillis</code> public in <code>CrossfadeDrawable</code> and <code>CrossfadeTransition</code>.</li> </ul> <h2 id=093-february-1-2020>[0.9.3] - February 1, 2020<a class=headerlink href=#093-february-1-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Translate child drawable inside <code>ScaleDrawable</code> to ensure it is centered.</li> <li>Fix: Fix case where GIFs and SVGs would not fill bounds completely.</li> </ul> <hr> <ul> <li>Defer calling <code>HttpUrl.get()</code> to background thread.</li> <li>Improve BitmapFactory null bitmap error message.</li> <li>Add 3 devices to hardware bitmap blacklist. (<a href=https://github.com/coil-kt/coil/pull/264>#264</a>)</li> </ul> <hr> <ul> <li>Update AndroidX dependencies:<ul> <li><code>androidx.lifecycle:lifecycle-common-java8</code> -&gt; 2.2.0</li> </ul> </li> </ul> <h2 id=092-january-19-2020>[0.9.2] - January 19, 2020<a class=headerlink href=#092-january-19-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Fix decoding GIFs on pre-API 19. Thanks @mario.</li> <li>Fix: Fix rasterized vector drawables not being marked as sampled.</li> <li>Fix: Throw exception if Movie dimensions are &lt;= 0.</li> <li>Fix: Fix CrossfadeTransition not being resumed for a memory cache event.</li> <li>Fix: Prevent returning hardware bitmaps to all target methods if disallowed.</li> <li>Fix: Fix MovieDrawable not positioning itself in the center of its bounds.</li> </ul> <hr> <ul> <li>Remove automatic scaling from CrossfadeDrawable.</li> <li>Make <code>BitmapPool.trimMemory</code> public.</li> <li>Wrap AnimatedImageDrawable in a ScaleDrawable to ensure it fills its bounds.</li> <li>Add @JvmOverloads to RequestBuilder.setParameter.</li> <li>Set an SVG's view box to its size if the view box is not set.</li> <li>Pass state and level changes to CrossfadeDrawable children.</li> </ul> <hr> <ul> <li>Update OkHttp to 3.12.8.</li> </ul> <h2 id=091-december-30-2019>[0.9.1] - December 30, 2019<a class=headerlink href=#091-december-30-2019 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Fix crash when calling <code>LoadRequestBuilder.crossfade(false)</code>.</li> </ul> <h2 id=090-december-30-2019>[0.9.0] - December 30, 2019<a class=headerlink href=#090-december-30-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>Transformation.transform</code> now includes a <code>Size</code> parameter. This is to support transformations that change the size of the output <code>Bitmap</code> based on the size of the <code>Target</code>. Requests with transformations are now also exempt from <a href=https://coil-kt.github.io/coil/getting_started/#image-sampling>image sampling</a>.</li> <li><strong>Breaking</strong>: <code>Transformation</code>s are now applied to any type of <code>Drawable</code>. Before, <code>Transformation</code>s would be skipped if the input <code>Drawable</code> was not a <code>BitmapDrawable</code>. Now, <code>Drawable</code>s are rendered to a <code>Bitmap</code> before applying the <code>Transformation</code>s.</li> <li><strong>Breaking</strong>: Passing <code>null</code> data to <code>ImageLoader.load</code> is now treated as an error and calls <code>Target.onError</code> and <code>Request.Listener.onError</code> with a <code>NullRequestDataException</code>. This change was made to support setting a <code>fallback</code> drawable if data is <code>null</code>. Previously the request was silently ignored.</li> <li><strong>Breaking</strong>: <code>RequestDisposable.isDisposed</code> is now a <code>val</code>.</li> </ul> <hr> <ul> <li><strong>New</strong>: Support for custom transitions. <a href=https://coil-kt.github.io/coil/transitions/ >See here for more info</a>. Transitions are marked as experimental as the API is incubating.</li> <li><strong>New</strong>: Add <code>RequestDisposable.await</code> to support suspending while a <code>LoadRequest</code> is in progress.</li> <li><strong>New</strong>: Support setting a <code>fallback</code> drawable when request data is null.</li> <li><strong>New</strong>: Add <code>Precision</code>. This makes the size of the output <code>Drawable</code> exact while enabling scaling optimizations for targets that support scaling (e.g. <code>ImageViewTarget</code>). See <a href=https://github.com/coil-kt/coil/blob/main/coil-core/src/main/java/coil/size/Precision.kt>its documentation</a> for more information.</li> <li><strong>New</strong>: Add <code>RequestBuilder.aliasKeys</code> to support matching multiple cache keys.</li> </ul> <hr> <ul> <li>Fix: Make RequestDisposable thread safe.</li> <li>Fix: <code>RoundedCornersTransformation</code> now crops to the size of the target then rounds the corners.</li> <li>Fix: <code>CircleCropTransformation</code> now crops from the center.</li> <li>Fix: Add several devices to the <a href=https://github.com/coil-kt/coil/blob/main/coil-core/src/main/java/coil/memory/HardwareBitmapService.kt>hardware bitmap blacklist</a>.</li> <li>Fix: Preserve aspect ratio when converting a Drawable to a Bitmap.</li> <li>Fix: Fix possible memory cache miss with <code>Scale.FIT</code>.</li> <li>Fix: Ensure Parameters iteration order is deterministic.</li> <li>Fix: Defensive copy when creating Parameters and ComponentRegistry.</li> <li>Fix: Ensure RealBitmapPool's maxSize &gt;= 0.</li> <li>Fix: Show the start drawable if CrossfadeDrawable is not animating or done.</li> <li>Fix: Adjust CrossfadeDrawable to account for children with undefined intrinsic size.</li> <li>Fix: Fix <code>MovieDrawable</code> not scaling properly.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.61.</li> <li>Update Kotlin Coroutines to 1.3.3.</li> <li>Update Okio to 2.4.3.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.1.0</li> </ul> </li> </ul> <h2 id=080-october-22-2019>[0.8.0] - October 22, 2019<a class=headerlink href=#080-october-22-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>SvgDrawable</code> has been removed. Instead, SVGs are now prerendered to <code>BitmapDrawable</code>s by <code>SvgDecoder</code>. This makes SVGs <strong>significantly less expensive to render on the main thread</strong>. Also <code>SvgDecoder</code> now requires a <code>Context</code> in its constructor.</li> <li><strong>Breaking</strong>: <code>SparseIntArraySet</code> extension functions have moved to the <code>coil.extension</code> package.</li> </ul> <hr> <ul> <li><strong>New</strong>: Support setting per-request network headers. <a href=https://github.com/coil-kt/coil/pull/120>See here for more info</a>.</li> <li><strong>New</strong>: Add new <code>Parameters</code> API to support passing custom data through the image pipeline.</li> <li><strong>New</strong>: Support individual corner radii in RoundedCornersTransformation. Thanks @khatv911.</li> <li><strong>New</strong>: Add <code>ImageView.clear()</code> to support proactively freeing resources.</li> <li><strong>New</strong>: Support loading resources from other packages.</li> <li><strong>New</strong>: Add <code>subtractPadding</code> attribute to ViewSizeResolver to enable/disable subtracting a view's padding when measuring.</li> <li><strong>New</strong>: Improve HttpUrlFetcher MIME type detection.</li> <li><strong>New</strong>: Add Animatable2Compat support to MovieDrawable and CrossfadeDrawable.</li> <li><strong>New</strong>: Add <code>RequestBuilder&lt;*&gt;.repeatCount</code> to set the repeat count for a GIF.</li> <li><strong>New</strong>: Add BitmapPool creation to the public API.</li> <li><strong>New</strong>: Annotate Request.Listener methods with <code>@MainThread</code>.</li> </ul> <hr> <ul> <li>Fix: Make CoilContentProvider visible for testing.</li> <li>Fix: Include night mode in the resource cache key.</li> <li>Fix: Work around ImageDecoder native crash by temporarily writing the source to disk.</li> <li>Fix: Correctly handle contact display photo uris.</li> <li>Fix: Pass tint to CrossfadeDrawable's children.</li> <li>Fix: Fix several instances of not closing sources.</li> <li>Fix: Add a blacklist of devices with broken/incomplete hardware bitmap implementations.</li> </ul> <hr> <ul> <li>Compile against SDK 29.</li> <li>Update Kotlin Coroutines to 1.3.2.</li> <li>Update OkHttp to 3.12.6.</li> <li>Update Okio to 2.4.1.</li> <li>Change <code>appcompat-resources</code> from <code>compileOnly</code> to <code>implementation</code> for <code>coil-base</code>.</li> </ul> <h2 id=070-september-8-2019>[0.7.0] - September 8, 2019<a class=headerlink href=#070-september-8-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>ImageLoaderBuilder.okHttpClient(OkHttpClient.Builder.() -&gt; Unit)</code> is now <code>ImageLoaderBuilder.okHttpClient(() -&gt; OkHttpClient)</code>. The initializer is also now called lazily on a background thread. <strong>If you set a custom <code>OkHttpClient</code> you must set <code>OkHttpClient.cache</code> to enable disk caching.</strong> If you don't set a custom <code>OkHttpClient</code>, Coil will create the default <code>OkHttpClient</code> which has disk caching enabled. The default Coil cache can be created using <code>CoilUtils.createDefaultCache(context)</code>. e.g.:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kd>val</span><span class=w> </span><span class=nv>imageLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageLoader</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>okHttpClient</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>        </span><span class=n>OkHttpClient</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>            </span><span class=p>.</span><span class=na>cache</span><span class=p>(</span><span class=n>CoilUtils</span><span class=p>.</span><span class=na>createDefaultCache</span><span class=p>(</span><span class=n>context</span><span class=p>))</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>}</span>
</code></pre></div> <ul> <li><strong>Breaking</strong>: <code>Fetcher.key</code> no longer has a default implementation.</li> <li><strong>Breaking</strong>: Previously, only the first applicable <code>Mapper</code> would be called. Now, all applicable <code>Mapper</code>s will be called. No API changes.</li> <li><strong>Breaking</strong>: Minor named parameter renaming: <code>url</code> -&gt; <code>uri</code>, <code>factory</code> -&gt; <code>initializer</code>.</li> </ul> <hr> <ul> <li><strong>New</strong>: <code>coil-svg</code> artifact, which has an <code>SvgDecoder</code> that supports automatically decoding SVGs. Powered by <a href=https://github.com/BigBadaboom/androidsvg>AndroidSVG</a>. Thanks @rharter.</li> <li><strong>New</strong>: <code>load(String)</code> and <code>get(String)</code> now accept any of the supported Uri schemes. e.g. You can now do <code>imageView.load("file:///path/to/file.jpg")</code>.</li> <li><strong>New</strong>: Refactor ImageLoader to use <code>Call.Factory</code> instead of <code>OkHttpClient</code>. This allows lazy initialization of the networking resources using <code>ImageLoaderBuilder.okHttpClient { OkHttpClient() }</code>. Thanks @ZacSweers.</li> <li><strong>New</strong>: <code>RequestBuilder.decoder</code> to explicitly set the decoder for a request.</li> <li><strong>New</strong>: <code>ImageLoaderBuilder.allowHardware</code> to enable/disable hardware bitmaps by default for an ImageLoader.</li> <li><strong>New</strong>: Support software rendering in ImageDecoderDecoder.</li> </ul> <hr> <ul> <li>Fix: Multiple bugs with loading vector drawables.</li> <li>Fix: Support WRAP_CONTENT View dimensions.</li> <li>Fix: Support parsing EXIF data longer than 8192 bytes.</li> <li>Fix: Don't stretch drawables with different aspect ratios when crossfading.</li> <li>Fix: Guard against network observer failing to register due to exception.</li> <li>Fix: Fix divide by zero error in MovieDrawable. Thanks @R12rus.</li> <li>Fix: Support nested Android asset files. Thanks @JaCzekanski.</li> <li>Fix: Guard against running out of file descriptors on Android O and O_MR1.</li> <li>Fix: Don't crash when disabling memory cache. Thanks @hansenji.</li> <li>Fix: Ensure Target.cancel is always called from the main thread.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.50.</li> <li>Update Kotlin Coroutines to 1.3.0.</li> <li>Update OkHttp to 3.12.4.</li> <li>Update Okio to 2.4.0.</li> <li>Update AndroidX dependencies to the latest stable versions:<ul> <li><code>androidx.appcompat:appcompat</code> -&gt; 1.1.0</li> <li><code>androidx.core:core-ktx</code> -&gt; 1.1.0</li> <li><code>androidx.lifecycle:lifecycle-common-java8</code> -&gt; 2.1.0</li> </ul> </li> <li>Replace <code>appcompat</code> with <code>appcompat-resources</code> as an optional <code>compileOnly</code> dependency. <code>appcompat-resources</code> is a much smaller artifact.</li> </ul> <h2 id=061-august-16-2019>[0.6.1] - August 16, 2019<a class=headerlink href=#061-august-16-2019 title="Permanent link">&para;</a></h2> <ul> <li>New: Add <code>transformations(List&lt;Transformation&gt;)</code> to RequestBuilder.</li> <li>Fix: Add the last modified date to the cache key for file uris.</li> <li>Fix: Ensure View dimensions are evaluated to at least 1px.</li> <li>Fix: Clear MovieDrawable's canvas between frames.</li> <li>Fix: Open assets correctly.</li> </ul> <h2 id=060-august-12-2019>[0.6.0] - August 12, 2019<a class=headerlink href=#060-august-12-2019 title="Permanent link">&para;</a></h2> <ul> <li>Initial release.</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Coil Contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/coil-kt/coil target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>